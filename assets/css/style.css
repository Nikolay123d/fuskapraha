:root{--authwall:url('../img/auth_prague.png');--line:rgba(255,255,255,.12);--text:#eafff3;--wall:url('../img/bg.jpg');--chatwall:var(--wall);--dmwall:var(--wall);--profilewall:var(--wall)}
*{box-sizing:border-box}html,body{font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;height:100%}
body{margin:0;background:#0b1611;color:var(--text);background-image:var(--wall);background-size:cover;background-attachment:fixed}
a{color:#7dffc1}
.topbar{position:sticky;top:0;display:flex;justify-content:space-between;align-items:center;gap:8px;padding:10px 14px;background:rgba(0,0,0,.55);backdrop-filter:blur(6px);border-bottom:1px solid var(--line);z-index:20}
.brand{font-weight:900}
.ghost{background:transparent;border:1px solid var(--line);border-radius:10px;color:var(--text);padding:6px 10px}
.citysel select{border:1px solid var(--line);background:rgba(0,0,0,.35);color:var(--text);border-radius:10px;padding:6px 8px}

.tabs{display:flex;gap:8px;padding:8px 12px;overflow-x:auto;flex-wrap:nowrap;white-space:nowrap;-webkit-overflow-scrolling:touch;background:rgba(0,0,0,.45);border-bottom:1px solid var(--line);position:sticky;top:56px;z-index:19}
.tabs.hidden{display:none}
.tab{border:1px solid var(--line);background:rgba(0,0,0,.35);color:var(--text);border-radius:10px;padding:8px 10px}
.tab.active{border-color:#39ff91}

#views{padding:12px;max-width:1100px;margin:0 auto}
.view{display:none;background:rgba(0,0,0,.25);border:1px solid var(--line);border-radius:14px;padding:10px}
.view.active{display:block}

.feed{display:flex;flex-direction:column;gap:10px;min-height:55vh;padding-bottom:72px}
.msg{display:flex;gap:8px}
.msg .ava{width:36px;height:36px;border-radius:50%;overflow:hidden;border:1px solid var(--line);flex:0 0 36px}
.msg .ava img{width:100%;height:100%;object-fit:cover}
.msg .bubble{background:rgba(0,0,0,.55);border:1px solid var(--line);border-radius:16px;padding:8px 12px;max-width:78%}
.msg .name{font-weight:700;font-size:12px;opacity:.9;margin-bottom:4px}
.msg .text img{max-width:220px;border-radius:10px;border:1px solid var(--line);display:block;margin-top:6px}
.msg .actions{display:flex;gap:6px;margin-top:6px}
.msg .actions button{border:1px solid var(--line);background:rgba(0,0,0,.3);color:var(--text);border-radius:10px;padding:4px 8px;font-size:12px}

.composer.sticky{position:sticky;bottom:8px;display:flex;gap:8px;align-items:center;background:rgba(0,0,0,.72);padding:8px;border:1px solid var(--line);border-radius:12px}
.composer input{flex:1;min-width:160px;padding:10px;border-radius:12px;border:1px solid var(--line);background:rgba(0,0,0,.35);color:var(--text)}
.composer button,.filebtn{border:1px solid rgba(58,255,145,.8);background:rgba(0,0,0,.25);color:var(--text);border-radius:12px;padding:10px 12px}
.filebtn input{display:none}

.modal{position:fixed;inset:0;
  /* Lighter overlay (requested) so dark text stays readable */
  background: rgba(135, 206, 250, .22);
  display:flex;align-items:center;justify-content:center;z-index:30}
.modal[hidden]{display:none !important}

/* When auth is open, disable background interactions */
body.auth-open .topbar,
body.auth-open .tabs,
body.auth-open #views{
  filter: blur(6px);
  opacity: .35;
  pointer-events: none;
  user-select: none;
}

/* Auth modal – match reference (full background, centered card) */
.modal#modalAuth{
  position:fixed;
  background-image: var(--authwall);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  overflow:auto;
}
.modal#modalAuth::before{
  content:'';
  position:absolute;
  inset:0;
  background: rgba(6,14,32,.72);
  backdrop-filter: blur(10px);
}
.modal#modalAuth > *{ position:relative; z-index:1; }
.auth-card{ 
  width: min(92vw, 760px);
  background: rgba(10,18,36,.86);
  color: #ffffff;
  border-radius: 26px;
  border: 1px solid rgba(0,0,0,.08);
  box-shadow: 0 30px 120px rgba(0,0,0,.45);
  overflow: hidden;
  position: relative;
  display:flex;
  min-height: 520px;
}
.auth-left{
  display:block;
  width: 42%;
  background-image: var(--authwall);
  background-size: cover;
  background-position: center;
  position: relative;
}
.auth-left:after{
  content:'';
  position:absolute;inset:0;
  background: linear-gradient(120deg, rgba(0,0,0,.55), rgba(0,0,0,.15));
}
.auth-right{padding:26px 22px; width:58%}
.auth-right h2{margin:0 0 8px 0;font-size:28px}
.auth-brand{display:flex;flex-direction:column;align-items:center;gap:10px;margin-bottom:14px;text-align:center}
.auth-brand img{width:54px;height:54px}
.auth-brand .name{font-weight:900;font-size:26px;letter-spacing:.4px}
.auth-brand .tag{font-size:14px;opacity:.75}
.auth-brand .hook{font-size:14px;line-height:1.3;opacity:.92;max-width:340px}
.auth-brand .hook .cursor{display:inline-block; width:10px; animation: blink 1s steps(1) infinite;}
@keyframes blink{50%{opacity:0}}
.auth-form .inp span{display:block;font-size:12px;opacity:.8;margin-bottom:6px}
.auth-form .inp input,.auth-form .inp select{width:100%;padding:14px 14px;border-radius:14px;border:1px solid rgba(0,0,0,.12);background:rgba(0,0,0,.35);color:rgba(234,255,243,1)}
.auth-form .btn.primary{border:none;border-radius:16px;padding:14px 14px;font-weight:800;background:linear-gradient(90deg,#00d2ff,#3a7bd5);color:#fff}
.auth-social .btn.ghost{width:100%;border-radius:16px;border:1px solid rgba(0,0,0,.14);background:rgba(255,255,255,.8);color:#0b1a12}
.auth-switch .link,.auth-form .link{color:rgba(255,255,255,.88);opacity:.9}
.auth-right .x{position:absolute;top:14px;right:14px;border:1px solid rgba(255,255,255,.18);background:rgba(0,0,0,.25);color:#fff;border-radius:12px;width:40px;height:40px}

/* Mobile: full-screen auth */
@media (max-width: 720px){
  .auth-card{
    width:100vw;
    min-height:100vh;
    border-radius:0;
    margin:0;
    background: transparent;
    border:none;
    box-shadow:none;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .auth-left{ display:none; }
  .auth-right{
    width:min(92vw, 420px);
    padding:22px 18px;
    background: rgba(10,18,36,.78);
    border:1px solid rgba(255,255,255,.14);
    border-radius:22px;
    box-shadow:0 30px 120px rgba(0,0,0,.55);
    backdrop-filter: blur(10px);
  }
  body.auth-open .topbar, body.auth-open .tabs, body.auth-open #views{
    filter:none; opacity:1; pointer-events:none;
  }
}

.card{width:min(92vw,820px);background:rgba(0,0,0,.10);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:12px;backdrop-filter:blur(8px);box-shadow:0 20px 60px rgba(0,0,0,.25)}
.card header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.row{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0}
.ava-lg{width:64px;height:64px;border-radius:50%;border:1px solid var(--line);object-fit:cover}
.cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:12px}
.map{height:420px;border-radius:12px;overflow:hidden}
.dm{display:grid;grid-template-columns:300px 1fr;gap:12px}
#dmMessages{display:flex;flex-direction:column;gap:8px;max-height:55vh;overflow:auto}
.adm-only{display:none;border:1px dashed var(--line);padding:8px;border-radius:10px;margin-top:10px}
.muted{opacity:.7;font-size:12px}

.toast{
  position:sticky; bottom:88px;
  background:rgba(0,0,0,.9);
  border:1px solid var(--line);
  padding:8px 10px; border-radius:10px; width:max-content; max-width:90%;
  margin:6px 8px; z-index:22
}
#globalToast{ position:fixed; left:50%; transform:translateX(-50%); bottom:20px }

/* Floating quick actions */
.fab{
  position:fixed;
  right:16px;
  bottom:16px;
  width:56px;
  height:56px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(10px);
  color:var(--text);
  font-size:28px;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:80;
}
.fab:active{ transform:translateY(1px) }
.fab-menu{
  position:fixed;
  right:16px;
  bottom:80px;
  z-index:80;
  width:min(260px, calc(100vw - 32px));
  background:rgba(0,0,0,.62);
  border:1px solid rgba(255,255,255,.18);
  border-radius:16px;
  padding:10px;
  backdrop-filter:blur(12px);
  box-shadow:0 12px 40px rgba(0,0,0,.4);
}
.fab-menu button{
  width:100%;
  text-align:left;
  padding:10px 12px;
  border-radius:12px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  color:var(--text);
  margin:6px 0;
}
.fab-menu button:hover{ background:rgba(255,255,255,.09) }
.fab-menu button.danger{ border-color:rgba(255,80,80,.45) }

@media (min-width: 900px){
  .fab, .fab-menu{ right:24px; }
}

/* Preloader */
#preloader{
  position:fixed; inset:0; z-index:99999;
  background: #071311;
  display:flex; align-items:center; justify-content:center;
  text-align:center;
}
#preloader.hidden{display:none !important;}
#preloader .box{display:flex;flex-direction:column;gap:10px;align-items:center;justify-content:center}
#preloader .spin{
  width:56px;height:56px;border-radius:50%;
  border:5px solid rgba(255,255,255,.15);
  border-top-color: rgba(58,255,145,.95);
  animation:spin 1.1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
#preloader .hint{opacity:.8;font-size:13px}
#preloader .btn{
  border:1px solid rgba(58,255,145,.9);
  background:rgba(0,0,0,.25);
  color:var(--text); border-radius:12px;
  padding:10px 14px; cursor:pointer;
}
#preloader .timer{opacity:.7;font-size:12px}

/* Greeting overlay */
#greetOverlay.modal{z-index:100000;}
#greetOverlay .card{max-width:520px;text-align:center}
#greetOverlay img.rose{width:84px;height:84px;margin:6px auto 0;display:block}

.badge{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid var(--line);font-size:12px;margin-left:6px}
.badge.premium{border-color:rgba(58,255,145,.8)}
.badge.admin{border-color:rgba(255,196,0,.75);}

html,body{overflow-x:hidden}


/* --- Preloader --- */
#preloader{position:fixed;inset:0;z-index:99999;display:flex;align-items:center;justify-content:center;text-align:center;color:#eafff3}
#preloader.hidden{display:none!important}
#preloader .pre-bg{position:absolute;inset:0;background-image:linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.75)),url('../img/bg.jpg');background-size:cover;background-position:center;filter:saturate(1.1)}
#preloader .box{position:relative;z-index:1;display:flex;flex-direction:column;gap:10px;align-items:center;justify-content:center;padding:22px 18px;border:1px solid var(--line);border-radius:16px;background:rgba(0,0,0,.35);backdrop-filter:blur(10px);width:min(92vw,520px)}
#preloader .logo{font-weight:900;letter-spacing:.06em}
#preloader .title{font-weight:700;font-size:20px}
#preloader .subtitle{opacity:.9}
#preloader .row{display:flex;gap:10px;align-items:center}
#preloader .spin{width:42px;height:42px;border-radius:50%;border:4px solid rgba(255,255,255,.18);border-top-color:#39ff91;animation:sp 1s linear infinite}
#preloader .timer{opacity:.85;font-size:13px}
@keyframes sp{to{transform:rotate(360deg)}}
@media (max-width:520px){
  #preloader .title{font-size:18px}
}


/* === MAKÁME CZ Theme v7 === */
body{background-image:linear-gradient(rgba(10,18,14,.65),rgba(10,18,14,.75)),var(--wall)!important}
.topbar{gap:10px;padding:12px 14px}
.brand{display:flex;align-items:center;gap:10px;min-width:140px}
.brand-logo{height:34px;width:auto;filter:drop-shadow(0 10px 18px rgba(0,0,0,.35))}
.tabs{display:flex;gap:10px;flex-wrap:wrap;padding:10px 12px}
.tab{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.14);backdrop-filter:blur(10px);text-decoration:none;color:var(--text);font-weight:600}
.tab.active{background:rgba(0,212,166,.18);border-color:rgba(0,212,166,.55)}
.view{padding:12px}
.card{width:min(92vw,820px);background:rgba(0,0,0,.10);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:12px;backdrop-filter:blur(8px);box-shadow:0 20px 60px rgba(0,0,0,.25)}
#chatFeed{display:flex;flex-direction:column;gap:10px}
.msg{display:flex;gap:10px;align-items:flex-end}
.msg .ava{width:44px;height:44px;border-radius:50%;border:2px solid rgba(255,255,255,.2);overflow:hidden;flex:0 0 44px;background:rgba(255,255,255,.06)}
.msg .ava img{width:100%;height:100%;object-fit:cover}
.bubble{border-radius:22px;padding:10px 14px}
.msg.me{flex-direction:row-reverse}
.msg.me .bubble{background:rgba(0,212,166,.18);border-color:rgba(0,212,166,.45)}
.msg.other .bubble{background:rgba(0,0,0,.35)}
.msg.bot .bubble{background:rgba(255,77,109,.16);border-color:rgba(255,77,109,.35)}
.composer{position:sticky;bottom:0;margin-top:10px;padding:10px;border-radius:18px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.14);backdrop-filter:blur(12px)}
.composer input,.composer textarea{background:rgba(0,0,0,.45)!important;border:1px solid rgba(255,255,255,.14)!important;color:var(--text)!important;border-radius:14px!important}
.btn.primary{background:linear-gradient(135deg,#00D4A6,#2F6BFF)!important;border:none!important}
.btn.danger{background:linear-gradient(135deg,#FF4D6D,#FF3B30)!important;border:none!important}
#authModal .modal{background:rgba(135, 206, 250, .22);color:#111;border-radius:22px;max-width:420px}
#authModal .modal h2{margin:0 0 8px 0}
#authModal input{background:#eef2ff;border:1px solid #d6dcff;color:#111}
#authModal .googleBtn{background:#fff;border:1px solid #e5e7eb}
#preloader .logo-img{height:56px;width:auto;filter:drop-shadow(0 18px 32px rgba(0,0,0,.35))}
#preloader .slogan{display:block;margin-top:6px;font-weight:600;opacity:.92}
@media (max-width:520px){
  .tabs{flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch}
  .tabs::-webkit-scrollbar{display:none}
  .tab{white-space:nowrap}
}

/* === Stage7 v3 fixes (no overlays, responsive brand, colored auth & preloader) === */
.view{background:transparent !important;border:none !important;padding:0 !important}
#views{padding:10px !important}

/* Make brand fit on small screens */
.brand{min-width:0}
.brand .brand-text{font-size:18px;letter-spacing:.02em;white-space:nowrap}
@media (max-width:420px){
  .brand .brand-text{font-size:15px}
  .topbar{padding:10px 10px}
}

/* Auth modal: colored + background image, like reference */
.modal-backdrop{backdrop-filter: blur(10px)}
#modalAuth .auth-card{
  background: rgba(20,20,24,.72);
  border:1px solid rgba(255,255,255,.14);
  box-shadow: 0 20px 70px rgba(0,0,0,.45);
}
#modalAuth .auth-left{
  background: linear-gradient(120deg, rgba(0,0,0,.35), rgba(0,0,0,.15)), url('../img/bg.jpg') center/cover no-repeat;
}
#modalAuth .auth-right{
  background: rgba(255,255,255,.10);
}
#modalAuth h2, #modalAuth h3, #modalAuth p, #modalAuth label, #modalAuth a{color:#fff}
#modalAuth input{
  background: rgba(255,255,255,.18);
  border:1px solid rgba(255,255,255,.18);
  color:#fff;
}
#modalAuth input::placeholder{color:rgba(255,255,255,.65)}
#modalAuth .btn.primary{background: linear-gradient(90deg,#ff2f86,#ff9b2f); color:#111; font-weight:800}
#modalAuth .googlebtn{background: rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.18); color:#fff}

/* Preloader more colorful */
#preloader{
  background: linear-gradient(135deg, rgba(0,0,0,.70), rgba(0,0,0,.30)), url('../img/bg.jpg') center/cover no-repeat;
}
#preloader .pre-box{
  background: rgba(10,10,14,.55);
  border:1px solid rgba(255,255,255,.14);
}

/* Hide wallpaper camera by default (admin enables) */
#wallCamWrap{display:none}

/* Chat bubbles always visible, no frame */
.msg{backdrop-filter: blur(8px)}
.msg.me{background: rgba(76,255,187,.22)}
.msg.other{background: rgba(255,255,255,.14)}


/* === Mobile messenger UI (drawer + icons) === */
.mobile-only{ display:none; }
.desktop-only{ display:inline-flex; }

.iconbtn{
  border:0;
  background:rgba(0,0,0,.25);
  color:#fff;
  padding:8px 10px;
  border-radius:12px;
  cursor:pointer;
  line-height:1;
  backdrop-filter: blur(10px);
}
.mebtn{
  border:0;
  background:rgba(0,0,0,.25);
  padding:5px;
  border-radius:14px;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  backdrop-filter: blur(10px);
}
#meMiniAva{
  width:28px;height:28px;border-radius:50%;
  object-fit:cover;
  display:block;
}

.drawer-btn.neon{
  border:1px solid rgba(0,255,213,.55);
  background:rgba(0,0,0,.25);
  color:#eaffff;
  padding:8px 12px;
  border-radius:14px;
  cursor:pointer;
  box-shadow: 0 0 10px rgba(0,255,213,.55), 0 0 22px rgba(0,255,213,.25);
  animation: neonPulse 2.6s ease-in-out infinite;
}
@keyframes neonPulse{
  0%,100%{ box-shadow: 0 0 10px rgba(0,255,213,.55), 0 0 22px rgba(0,255,213,.25); transform:translateZ(0); }
  50%{ box-shadow: 0 0 14px rgba(0,255,213,.85), 0 0 36px rgba(0,255,213,.35); }
}

/* Drawer */
.drawer-overlay{
  position:fixed; inset:0;
  background:rgba(0,0,0,.55);
  backdrop-filter: blur(3px);
  z-index: 9998;
}
.drawer{
  position:fixed; top:0; left:0; height:100vh;
  width:min(82vw, 320px);
  background:rgba(10,10,14,.82);
  backdrop-filter: blur(14px);
  border-right:1px solid rgba(255,255,255,.12);
  transform: translateX(-105%);
  transition: transform .22s ease;
  z-index: 9999;
  padding: 10px 10px 14px;
}
.drawer.open{ transform: translateX(0); }
.drawer-head{ display:flex; align-items:center; justify-content:space-between; padding:6px 4px 10px; }
.drawer-title{ font-weight:800; letter-spacing:.4px; }
.drawer-item{
  display:flex; gap:10px; align-items:center;
  padding:12px 10px;
  border-radius:14px;
  color:#fff;
  text-decoration:none;
}
.drawer-item:hover{ background: rgba(255,255,255,.08); }
.drawer-sep{ height:1px; background:rgba(255,255,255,.10); margin:10px 0; }
.drawer-btn2{
  width:100%;
  padding:12px 10px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.06);
  color:#fff;
  cursor:pointer;
}
.drawer-btn2 + .drawer-btn2{ margin-top:8px; }

/* Mobile header layout tweaks */
@media (max-width: 720px){
  .mobile-only{ display:inline-flex !important; }
  .desktop-only{ display:none !important; }
  .tabs{ display:none !important; }
  .topbar .brand{ display:none; }
  #toggleTabs{ display:none !important; }
  #wallCamWrap{ display:none !important; }
  .topbar .row{ gap:8px; }
  .citysel{ flex: 1; }
}


/* === User Card modal === */
body.modal-open .topbar,
body.modal-open .tabs,
body.modal-open #views{ filter: blur(6px); opacity:.35; pointer-events:none; user-select:none; }
.usercard{
  width:min(92vw,520px);
  background:rgba(15,27,22,.92);
  border:1px solid rgba(255,255,255,.14);
  border-radius:22px;
  padding:16px;
  box-shadow:0 30px 120px rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
  position:relative;
}
.usercard .x{
  position:absolute; top:12px; right:12px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.25);
  color:var(--text);
  border-radius:12px;
  width:40px;height:40px;
}
.uc-head{ display:flex; gap:12px; align-items:center; }
.uc-ava{ width:64px;height:64px;border-radius:50%; border:2px solid rgba(255,255,255,.16); object-fit:cover; }
.uc-meta .uc-name{ font-size:18px; }
.uc-actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
.uc-actions button{ border:1px solid rgba(58,255,145,.8); background:rgba(0,0,0,.25); color:var(--text); border-radius:14px; padding:10px 12px; }
.uc-actions .ghost{ border-color: rgba(255,255,255,.18); }
.uc-block{ margin-top:12px; padding-top:10px; border-top:1px solid rgba(255,255,255,.10); }


/* === Clickable user profiles === */
[data-uid]{cursor:pointer}

/* User profile modal */
.modal-card.usercard{max-width:820px}
.usercard .pill{
  border:1px solid rgba(255,255,255,.14);
  background:rgba(0,0,0,.25);
  border-radius:999px;
  padding:6px 10px;
  font-size:13px;
}
.stars{display:inline-flex;gap:6px}
.stars button{
  border:none;
  background:transparent;
  font-size:20px;
  line-height:1;
  padding:2px 2px;
  cursor:pointer;
  filter:drop-shadow(0 6px 10px rgba(0,0,0,.25));
}
.stars button.off{opacity:.35}
.stars button.on{opacity:1}

/* Vacancy cards */
.vac-item{border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:10px;background:rgba(0,0,0,.22)}
.vac-item .t{font-weight:800}
.vac-item .m{opacity:.8;font-size:12px;margin-top:4px}
.vac-item .d{margin-top:8px;white-space:pre-wrap}


.badge-count{
  position:absolute;
  top:-6px;
  right:-6px;
  min-width:18px;
  height:18px;
  border-radius:999px;
  background:#ff3b30;
  color:#fff;
  font-size:11px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0 5px;
  border:2px solid rgba(0,0,0,.6);
}
.iconbtn{position:relative}


/* --- v6 UI fixes: stars visibility, modal close reliability, responsive layout --- */
body, #app, #views{max-width:100%; overflow-x:hidden;}
.modal{z-index:99999;} /* ensure modal always above drawer/topbar */
.card.modal-card{position:relative; max-width:min(900px, 92vw); max-height:92vh; overflow:auto;}
.card.modal-card header{position:sticky; top:0; z-index:2; background:rgba(12,14,16,.65); backdrop-filter: blur(10px);}
.card.modal-card header button{position:relative; z-index:5; pointer-events:auto;}
/* Stars */
.stars button{
  background:transparent;
  border:none;
  font-size:22px;
  line-height:1;
  padding:2px 4px;
  cursor:pointer;
  text-shadow:0 0 10px rgba(255,215,0,.25);
}
.stars button.on{ color:#ffd54a; filter:drop-shadow(0 0 6px rgba(255,213,74,.35)); }
.stars button.off{ color:rgba(255,255,255,.25); }
.stars button:focus{ outline:2px solid rgba(0,255,200,.35); border-radius:8px; }

/* Auth modal polish */
#modalAuth .auth-card{
  max-width:min(520px, 92vw);
  border-radius:22px;
  background:rgba(15,18,22,.72);
  box-shadow:0 20px 60px rgba(0,0,0,.55);
  border:1px solid rgba(255,255,255,.10);
}
#modalAuth .auth-card h1, #modalAuth .auth-card h2{ letter-spacing:.4px; }
#modalAuth input, #modalAuth select{
  border-radius:14px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
}
#modalAuth .btn-primary{ border-radius:16px; }

/* Hide topbar login/logout on mobile; use drawer buttons instead */
@media (max-width: 860px){
  #btnLogin, #btnSignout{ display:none !important; }
}

/* Composer must not overflow */
.composer{display:flex; gap:10px; align-items:center; flex-wrap:wrap;}
.composer input{flex:1 1 320px; min-width:0;}
.composer button, .composer .filebtn{flex:0 0 auto;}

/* DM grid stability */
.dm{min-width:0;}
.dm > *{min-width:0;}
@media (max-width: 860px){
  .dm{grid-template-columns: 1fr !important;}
}

.wallcam{display:inline-flex;align-items:center;justify-content:center;gap:8px;cursor:pointer;user-select:none}
.wallcam input{display:none}
.authwallcam{position:absolute;left:14px;top:14px;z-index:5;background:rgba(0,0,0,.35);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.18);border-radius:12px;padding:8px 10px;box-shadow:0 10px 30px rgba(0,0,0,.18);color:#fff}
@media (max-width:720px){
  .auth-card{flex-direction:column; min-height: unset;}
  .auth-left{width:100%; height:170px;}
  .auth-right{width:100%;}
}

/* === Admin gating: hidden by default === */
.adm-only, .admin-only { display:none; }
body.is-admin .adm-only, body.is-admin .admin-only { display:block; }

.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media(max-width:920px){.grid2{grid-template-columns:1fr}}

.filebtn{display:inline-flex;gap:8px;align-items:center;cursor:pointer;padding:8px 10px;border:1px solid var(--line);border-radius:10px;background:rgba(255,255,255,.04)}
.filebtn input{display:none}
.thumb{width:46px;height:46px;object-fit:cover;border-radius:10px;border:1px solid var(--line);background:rgba(255,255,255,.03)}
.pill{display:inline-flex;align-items:center;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:rgba(255,255,255,.04);font-size:12px}

#view-chat{background-image:var(--chatwall);background-size:cover;background-attachment:fixed}
#view-dm{background-image:var(--dmwall);background-size:cover;background-attachment:fixed}
#view-profile{background-image:var(--profilewall);background-size:cover;background-attachment:fixed}

/* Badges (counts) */
.badge-count{
  position:absolute;
  top:-6px;
  right:-6px;
  min-width:18px;
  height:18px;
  padding:0 5px;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:11px;
  font-weight:700;
  background:rgba(255,66,111,.92);
  color:#fff;
  border:1px solid rgba(255,255,255,.25);
  box-shadow:0 6px 14px rgba(0,0,0,.35);
}
.iconbtn{position:relative}

/* Mini loaders */
.feed-rel{position:relative}
.mini-load{
  position:absolute;
  left:12px;
  right:12px;
  top:12px;
  padding:10px 12px;
  border-radius:12px;
  background:rgba(0,0,0,.45);
  border:1px solid rgba(255,255,255,.18);
  backdrop-filter: blur(6px);
  font-weight:600;
  z-index:5;
  /* Never block taps/clicks under the loader (mobile issue: buttons not clickable) */
  pointer-events:none;

  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
  text-align:center;
}

.mini-load .mini-status{font-weight:700;}
.mini-load .mini-tip{font-weight:500; opacity:.85; font-size:12px; line-height:1.25;}


@keyframes spin{to{transform:rotate(360deg)}}

/* Mobile UX: open DM room as a full-screen overlay card to avoid cramped split view */
@media (max-width: 720px){
  .dm{ display:block; }
  #view-dm .dm > .card:first-child{ display:block; }
  body.dm-room-open #view-dm .dm > .card:first-child{ display:none; }
  #view-dm .dm > .card:last-child{ display:none; }
  body.dm-room-open #view-dm .dm > .card:last-child{
    display:block;
    position:fixed;
    inset:62px 10px 10px 10px;
    z-index:99990;
  }
  body.dm-room-open #view-dm .dm > .card:last-child header{
    position:sticky;
    top:0;
    z-index:2;
  }
}

/* Scroll down button */
.scroll-down{
  position:absolute;
  right:14px;
  bottom:78px;
  width:54px;
  height:54px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(0,0,0,.45);
  color:#fff;
  font-size:22px;
  cursor:pointer;
  z-index:6;
  box-shadow:0 12px 30px rgba(0,0,0,.45);
}
.scroll-down:hover{background:rgba(0,0,0,.55)}

/* Friends view polish */
#view-friends .feed{gap:10px}
#view-friends .msg{border-radius:16px}
#view-friends .empty{padding:10px 12px;border:1px dashed rgba(255,255,255,.18);border-radius:14px;background:rgba(255,255,255,.03)}

/* === v8 fixes: readability, time, admin actions, friends UX === */
.hint.warn{color:#ff3b30;font-weight:700}

/* Message meta row */
.msg .meta{display:flex;align-items:center;justify-content:space-between;gap:10px}
.msg .time{font-size:12px;opacity:.65;white-space:nowrap;margin-left:8px}

/* Admin actions */
.adminActions{display:flex;gap:6px;margin-top:6px}
.adminActions button{border:1px solid rgba(255,255,255,.16);background:rgba(0,0,0,.25);color:var(--text);border-radius:10px;padding:4px 8px;font-size:12px}

/* Auth modal stronger overlay for contrast */
.modal#modalAuth{background:rgba(0,0,0,.68) !important;}
.auth-card{background:rgba(255,255,255,.96) !important;}
.auth-right h2{color:#0b1a12}
.auth-form .inp span{color:#0b1a12;opacity:.75}
.auth-form .inp input,.auth-form .inp select{color:#0b1a12}

/* Friends requests section hidden unless needed */
#friendsReqSection{padding-top:8px}



/* Auth modal readability + mobile fit */
#modalAuth .overlay{ background:rgba(0,0,0,.72) !important; }
#modalAuth .auth-card{ max-width: 420px; width: min(92vw, 420px); }
#modalAuth .auth-card h1, #modalAuth .auth-card h2{ color: rgba(255,255,255,.95); }
#modalAuth .auth-card .muted, #modalAuth .auth-card label{ color: rgba(255,255,255,.78); }
#modalAuth input, #modalAuth select{ color: rgba(255,255,255,.95); }
#modalAuth input::placeholder{ color: rgba(255,255,255,.55); }
#modalAuth .spam-note{ color: #ff4b4b; font-weight: 700; }
@media (max-width: 520px){
  #modalAuth .auth-card{ padding: 16px !important; border-radius: 18px !important; }
  #modalAuth .auth-card h1{ font-size: 20px !important; }
  #modalAuth .auth-card h2{ font-size: 16px !important; }
  #modalAuth .row{ gap: 8px !important; }
}

/* v11: make auth modal fit without requiring page scroll */
@media (max-width: 520px){
  #modalAuth .auth-card{ max-height: 88vh; overflow:auto; }
  #modalAuth .auth-social .googlebtn, #modalAuth .auth-social .btn.ghost{ padding: 12px 14px; }
}

/* v11: tighter topbar on mobile so icons fit */
@media (max-width: 520px){
  .topbar{ flex-wrap: wrap; gap: 8px; }
  .topbar .citySelect{ flex: 1 1 180px; min-width: 180px; }
  .topbar .right{ flex: 0 0 auto; }
}

/* v11: make "scroll down" button more visible (requested blue) */
#chatScrollDown, #dmScrollDown{ border:1px solid rgba(90,160,255,.55) !important; background: rgba(90,160,255,.25) !important; }

/* Ensure no light underlay in composer */
.composer input::placeholder,.composer textarea::placeholder{opacity:.75}
/* Members */
#membersFeed .member{display:flex;align-items:center;gap:10px;padding:10px 12px;margin:8px 0;border-radius:14px;background:rgba(0,0,0,.28);border:1px solid rgba(255,255,255,.08)}
#membersFeed .member .ava{width:36px;height:36px;border-radius:50%;overflow:hidden;flex:0 0 36px}
#membersFeed .member .ava img{width:100%;height:100%;object-fit:cover}
#membersFeed .member .meta{flex:1;min-width:0}
#membersFeed .member .meta .name{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
#membersFeed .member .meta .sub{font-size:12px;opacity:.75;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
#membersFeed .member .acts{display:flex;gap:8px;align-items:center}
#membersFeed .member .acts button{border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.25);color:inherit;border-radius:12px;padding:8px 10px}


/* Mobile admin & tabs fixes */
@media (max-width: 720px){
  .tabs{ overflow-x:auto; white-space:nowrap; gap:8px; padding:8px; }
  .tab{ flex:0 0 auto; }
  .admin-grid{ grid-template-columns: 1fr !important; }
  .panel{ padding:12px; }
  .member{ grid-template-columns: 46px 1fr; }
  .member .acts{ display:flex; flex-wrap:wrap; gap:6px; justify-content:flex-end; }
  input, button, select, textarea{ font-size:16px; } /* prevent iOS zoom */
}

/* === v10: auth modal dark theme + prevent autofill glare === */
#modalAuth .auth-card{ background: rgba(0,0,0,.55) !important; border:1px solid rgba(255,255,255,.14) !important; }
#modalAuth .auth-right h2{ color: rgba(255,255,255,.95) !important; }
#modalAuth .auth-form .inp span{ color: rgba(255,255,255,.80) !important; }
#modalAuth .auth-form .inp input,
#modalAuth .auth-form .inp select{
  background: rgba(255,255,255,.10) !important;
  border: 1px solid rgba(255,255,255,.16) !important;
  color: rgba(255,255,255,.95) !important;
}
#modalAuth .auth-form .inp input::placeholder{ color: rgba(255,255,255,.55) !important; }
#modalAuth .auth-social .btn.ghost{ background: rgba(255,255,255,.12) !important; color: rgba(255,255,255,.92) !important; border:1px solid rgba(255,255,255,.18) !important; }

/* Chrome autofill */
#modalAuth input:-webkit-autofill,
#modalAuth input:-webkit-autofill:hover,
#modalAuth input:-webkit-autofill:focus{
  -webkit-text-fill-color: rgba(255,255,255,.95) !important;
  transition: background-color 99999s ease-in-out 0s;
  box-shadow: 0 0 0px 1000px rgba(0,0,0,.35) inset !important;
}

/* Admin layout: keep panels usable on both PC and mobile */
#view-admin{overflow:hidden;}
#view-admin .admin-grid{display:grid;grid-template-columns: 1fr 1fr;gap:14px;align-items:start;}
#view-admin .panel{max-height: calc(100vh - 220px); overflow:auto;}
@media (max-width: 920px){
  #view-admin .admin-grid{grid-template-columns: 1fr;}
  #view-admin .panel{max-height: unset;}
}

/* === v10: auth modal dark theme + prevent autofill glare === */
#modalAuth .auth-card{
  background: rgba(0,0,0,.55) !important;
  border: 1px solid rgba(255,255,255,.14) !important;
}
#modalAuth .auth-right h2{ color: rgba(255,255,255,.95) !important; }
#modalAuth .auth-form .inp span{ color: rgba(255,255,255,.80) !important; }
#modalAuth .auth-form .inp input,
#modalAuth .auth-form .inp select{
  background: rgba(255,255,255,.10) !important;
  border: 1px solid rgba(255,255,255,.18) !important;
  color: rgba(255,255,255,.95) !important;
}
#modalAuth .auth-form .inp input::placeholder{ color: rgba(255,255,255,.55) !important; }
#modalAuth .auth-social .btn.ghost{ background: rgba(255,255,255,.12) !important; color: rgba(255,255,255,.95) !important; border:1px solid rgba(255,255,255,.18) !important; }
#modalAuth .auth-right .x{ background: rgba(0,0,0,.35) !important; color: rgba(255,255,255,.95) !important; border:1px solid rgba(255,255,255,.18) !important; }

/* Chrome autofill */
#modalAuth input:-webkit-autofill,
#modalAuth input:-webkit-autofill:hover,
#modalAuth input:-webkit-autofill:focus{
  -webkit-text-fill-color: rgba(255,255,255,.95) !important;
  transition: background-color 9999s ease-out 0s;
  box-shadow: 0 0 0px 1000px rgba(0,0,0,.35) inset !important;
}

/* Admin layout fit: keep admin panels scrollable */
#view-admin{ overflow:auto; max-height: calc(100vh - 180px); padding-bottom: 18px; }
.admin-grid{ display:grid; grid-template-columns: 1fr 1fr; gap:14px; align-items:start; }
.admin-grid > .panel{ min-width:0; }

@media (max-width: 980px){
  .admin-grid{ grid-template-columns: 1fr; }
}


/* Admin view mobile usability */
#view-admin .row{flex-wrap:wrap; gap:8px;}
#view-admin input, #view-admin select{max-width:100%;}
@media(max-width:920px){
  #view-admin .cards{display:block;}
  #view-admin .card{margin-bottom:12px;}
  .fab-menu{max-height:70vh; overflow:auto;}
}

/* Mini loaders - smoother (keep absolute overlay inside .feed-rel) */
.mini-load{
  position:absolute;
  left:12px;
  right:12px;
  top:12px;
  padding:10px 12px;
  border:1px dashed var(--line);
  border-radius:12px;
  background:rgba(0,0,0,.45);
  backdrop-filter: blur(6px);
  display:flex;
  align-items:center;
  gap:10px;
  font-weight:600;
  z-index:6;
}
.mini-load:before{
  content:"";
  width:14px;height:14px;
  border-radius:50%;
  border:2px solid currentColor;
  border-top-color:transparent;
  animation:spin 0.9s linear infinite;
  opacity:.8;
}
@keyframes spin{to{transform:rotate(360deg);}}
.mini-load.center{
  left:50%;
  right:auto;
  top:50%;
  transform:translate(-50%,-50%);
  width: calc(100% - 32px);
  max-width:420px;
  text-align:left;
}
.mini-load .spinner{display:none;}



/* v15: bot editor helpers */
.stack{display:flex;flex-direction:column}
.scRow{display:flex;gap:8px;align-items:flex-start}
.scRow textarea{flex:1;min-width:180px}
.scRow .mini{max-width:140px}
.scRow .xbtn{padding:6px 10px}
@media (max-width:640px){
  .scRow{flex-direction:column}
  .scRow .mini{max-width:100%}
}


.cookie-modal{position:fixed;inset:0;display:flex;align-items:flex-end;justify-content:center;padding:18px;background:rgba(0,0,0,.35);backdrop-filter:blur(4px);z-index:100005;pointer-events:auto}
.cookie-card, .cookie-card *{pointer-events:auto}
.cookie-card{width:min(92vw,640px);border-radius:22px;background:rgba(12,24,18,.94);border:1px solid rgba(255,255,255,.10);box-shadow:0 30px 120px rgba(0,0,0,.55)}
.cookie-card header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}


.promo-card{width:min(92vw,840px);border-radius:22px;background:rgba(12,24,18,.96);border:1px solid rgba(255,255,255,.10);box-shadow:0 30px 120px rgba(0,0,0,.55)}
.promo-body{display:flex;gap:14px;align-items:stretch}
.promo-img{width:280px;max-width:40vw;object-fit:cover;border-radius:16px}
.promo-text{flex:1;min-width:240px}
@media (max-width:720px){
  .promo-body{flex-direction:column}
  .promo-img{width:100%;max-width:100%;height:180px}
}


.dm-mobile-card{width:min(96vw,820px);max-height:92vh;overflow:auto;border-radius:22px;background:rgba(12,24,18,.96);border:1px solid rgba(255,255,255,.10)}
#dmMobileMount .feed{min-height:60vh}

.auth-right input,.auth-right .inp{background:rgba(255,255,255,.08);color:#fff;border:1px solid rgba(255,255,255,.14)}
.auth-right input::placeholder{color:rgba(255,255,255,.65)}

/* v17 additions */
.modal-card{ max-width: 920px; width: min(920px, 94vw); max-height: 86vh; overflow:auto; }
.doc{ line-height:1.5; }
.doc h3{ margin: 6px 0 10px; }
.ava-lg{ width:72px; height:72px; border-radius:18px; object-fit:cover; }
.broadcast-banner{
  position: fixed;
  left: 10px; right: 10px; bottom: 90px;
  background: rgba(0,0,0,.65);
  border: 1px solid rgba(255,255,255,.14);
  backdrop-filter: blur(10px);
  border-radius: 18px;
  padding: 12px 12px;
  display:none;
  gap: 10px;
  align-items: center;
  z-index: 9999;
}
.broadcast-banner .bb-left{ flex:1; min-width: 180px; }
.broadcast-banner .bb-title{ font-weight:700; }
.broadcast-banner .bb-text{ font-size: 13px; opacity: .92; margin-top: 2px; }
.broadcast-banner .bb-actions{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
@media (max-width: 520px){
  .broadcast-banner{ bottom: 70px; }
  .broadcast-banner .bb-actions{ justify-content:flex-start; }
}
/* Admin buttons wrapping on mobile */
#view-admin .row{ flex-wrap:wrap; }


/* === v17.4 fixes: cookie clicks + mini loaders === */
.cookie-modal{ z-index:2147483647; }
.cookie-modal[hidden]{ display:none !important; }

/* Mini loader: show spinner + better layout */
.mini-load{
  display:flex;
  align-items:center;
  gap:10px;
}
.mini-load::before{
  content:"";
  width:16px;
  height:16px;
  border-radius:50%;
  border:3px solid rgba(255,255,255,.18);
  border-top-color: rgba(58,255,145,.95);
  animation: spin 1s linear infinite;
  flex:none;
}


/* === v17.6 Mobile fit + real mini spinners === */
html, body{overflow-x:hidden; max-width:100vw;}
/* Prevent accidental horizontal scroll from panels */
#app, .view, .modal, .sheet{max-width:100vw;}
/* Mini loader with spinner */
.mini-load{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  margin:10px 0;
  border:1px solid var(--line);
  border-radius:12px;
  background:rgba(0,0,0,.28);
  color:var(--text);
  font-weight:600;
}
.mini-load::before{
  content:"";
  width:18px;height:18px;
  border-radius:50%;
  border:2px solid rgba(255,255,255,.22);
  border-top-color: rgba(255,255,255,.85);
  animation: mk_spin 0.9s linear infinite;
  flex:0 0 auto;
}
@keyframes mk_spin{to{transform:rotate(360deg);}}

/* Mobile: make main layout fit without sideways scrolling */
@media (max-width: 520px){
  .tabs{gap:6px; padding:8px;}
  .tab{padding:8px 10px; font-size:12px;}
  .topbar{padding:10px 10px;}
  .citysel select{max-width:44vw;}
  /* Ensure feeds scroll inside, not whole page */
  #chatFeed, #dmFeed, #friendsList, #membersFeed{max-height: calc(100vh - 210px); overflow:auto;}
  #dmThreads{max-height: calc(100vh - 210px); overflow:auto;}
  .composer, .dmComposer{position:sticky; bottom:0; background:rgba(0,0,0,.35); backdrop-filter: blur(6px);}
  .modal .box{max-height: 92vh; overflow:auto;}
}

/* Admin camera quick buttons */
.admin-cam-btn{
  display:inline-flex; align-items:center; justify-content:center;
  width:34px; height:34px;
  border-radius:12px;
  border:1px solid var(--line);
  background:rgba(0,0,0,.35);
  color:var(--text);
  cursor:pointer;
}
.admin-cam-btn svg{width:18px;height:18px;}

/* =====================
   Activity ticker (thin marquee)
   ===================== */
#marqueeBar{
  position: sticky;
  top: 0;
  z-index: 9999;
  height: 22px;
  line-height: 22px;
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-bottom: 1px solid rgba(255,255,255,.08);
  overflow: hidden;
}
#marqueeInner{
  width: 100%;
  white-space: nowrap;
}
#marqueeInner span{
  display: inline-block;
  padding-left: 100%;
  animation: makameMarquee 18s linear infinite;
  font-size: 12px;
  opacity: .95;
}
@keyframes makameMarquee{
  0%   { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}


/* === Theme overrides: blue panels for Auth + DM (better readability) === */
#modalAuth .auth-card{
  background: rgba(10,18,58,.88) !important;
  border: 1px solid rgba(120,170,255,.22) !important;
}
#modalAuth .auth-right{
  background: rgba(60,120,255,.10) !important;
}
#modalAuth h2, #modalAuth h3, #modalAuth p, #modalAuth label, #modalAuth a{
  color: rgba(245,250,255,1) !important;
}
#modalAuth .auth-form .inp span{
  color: rgba(235,245,255,.92) !important;
  opacity: 1 !important;
}
#modalAuth input, #modalAuth select{
  background: rgba(0,0,0,.28) !important;
  border: 1px solid rgba(160,200,255,.18) !important;
  color: rgba(245,250,255,1) !important;
}
#modalAuth .auth-right .x{
  background: rgba(20,40,120,.55) !important;
  border: 1px solid rgba(160,200,255,.25) !important;
  color: #fff !important;
}
#modalAuth .auth-form .btn.primary{
  background: linear-gradient(135deg, rgba(30,140,255,.95), rgba(70,80,255,.95)) !important;
  color: #fff !important;
}

/* DM (view-dm) panels */
#view-dm .card{
  background: rgba(10,18,58,.55) !important;
  border: 1px solid rgba(120,170,255,.18) !important;
}
#view-dm #dmFeed, #view-dm #dmThreads{
  color: rgba(245,250,255,1) !important;
}
#view-dm input, #view-dm textarea{
  background: rgba(0,0,0,.28) !important;
  border: 1px solid rgba(160,200,255,.18) !important;
  color: rgba(245,250,255,1) !important;
}
#view-dm .ghost{
  border-color: rgba(160,200,255,.22) !important;
  color: rgba(245,250,255,1) !important;
}

@media (max-width: 560px){
  #modalAuth .auth-card{min-height:auto !important; width: min(94vw, 520px) !important; max-height: 92vh !important;}
  #modalAuth .auth-left{display:none !important;}
  #modalAuth .auth-right{padding:18px 16px !important;}
  #modalAuth .auth-form{gap:10px !important;}
}

/* === FORCE BLUE AUTH MODAL (override legacy white rules) === */
#modalAuth{ background: rgba(0,0,0,.72) !important; }
#modalAuth .auth-card{ 
  background: rgba(10,18,58,.88) !important;
  border: 1px solid rgba(120,170,255,.22) !important;
}
#modalAuth .auth-right h2,
#modalAuth .auth-right h3,
#modalAuth .auth-right p,
#modalAuth .auth-right label,
#modalAuth .auth-right a{ color: rgba(245,250,255,1) !important; }
#modalAuth .auth-form .inp span{ color: rgba(245,250,255,.78) !important; }
#modalAuth input, #modalAuth select{
  background: rgba(0,0,0,.28) !important;
  border: 1px solid rgba(160,200,255,.18) !important;
  color: rgba(245,250,255,1) !important;
}
#modalAuth input::placeholder{ color: rgba(245,250,255,.55) !important; }
#modalAuth .auth-social .btn.ghost,
#modalAuth .googlebtn{
  background: rgba(255,255,255,.12) !important;
  border: 1px solid rgba(255,255,255,.18) !important;
  color: rgba(245,250,255,1) !important;
}
#modalAuth .auth-right .x{ background: rgba(255,255,255,.10) !important; border-color: rgba(255,255,255,.18) !important; color:#fff !important; }

/* === FINAL OVERRIDE: BLUE AUTH MODAL (user request) === */
#modalAuth{ background: rgba(0,0,0,.70) !important; }
#modalAuth .overlay{ background: rgba(0,0,0,.70) !important; }
#modalAuth .auth-card{
  background: rgba(10,18,58,.88) !important;
  border: 1px solid rgba(120,170,255,.22) !important;
  box-shadow: 0 24px 80px rgba(0,0,0,.45) !important;
}
#modalAuth .auth-right{ background: transparent !important; }
#modalAuth h1, #modalAuth h2, #modalAuth h3,
#modalAuth p, #modalAuth label, #modalAuth a,
#modalAuth .muted{ color: rgba(245,250,255,.96) !important; }
#modalAuth .auth-form .inp span{ color: rgba(245,250,255,.82) !important; }
#modalAuth input, #modalAuth select{
  background: rgba(0,0,0,.28) !important;
  border: 1px solid rgba(160,200,255,.22) !important;
  color: rgba(245,250,255,1) !important;
}
#modalAuth input::placeholder{ color: rgba(245,250,255,.55) !important; }
#modalAuth .auth-social .btn.ghost,
#modalAuth .googlebtn{
  background: rgba(255,255,255,.10) !important;
  border: 1px solid rgba(160,200,255,.22) !important;
  color: rgba(245,250,255,1) !important;
}
#modalAuth .auth-right .x{
  background: rgba(255,255,255,.10) !important;
  border: 1px solid rgba(160,200,255,.22) !important;
  color: rgba(245,250,255,1) !important;
}


/* === vNEXT: Premium blue glass UI for Auth + DM (high readability) === */
:root{
  --blueGlass1: rgba(18, 92, 220, .55);
  --blueGlass2: rgba(6, 26, 80, .66);
  --blueBorder: rgba(170, 210, 255, .22);
  --blueText: rgba(255,255,255,.96);
  --blueMuted: rgba(255,255,255,.74);
  --blueInput: rgba(2, 12, 35, .50);
  --blueInputBorder: rgba(200, 230, 255, .18);
}

#modalAuth .auth-card{
  background: linear-gradient(180deg, var(--blueGlass1), var(--blueGlass2)) !important;
  border: 1px solid var(--blueBorder) !important;
  box-shadow: 0 18px 60px rgba(0,0,0,.35) !important;
}
#modalAuth .auth-right h2,
#modalAuth .auth-brand .name,
#modalAuth .auth-card h1,
#modalAuth .auth-card h2{
  color: var(--blueText) !important;
}
#modalAuth .auth-card .muted,
#modalAuth .auth-card label,
#modalAuth .auth-form .inp span{
  color: var(--blueMuted) !important;
}
#modalAuth .auth-right .x{
  background: rgba(0,0,0,.25) !important;
  border: 1px solid rgba(255,255,255,.18) !important;
  color: var(--blueText) !important;
}
#modalAuth .auth-form .inp input,
#modalAuth .auth-form .inp select{
  background: var(--blueInput) !important;
  border: 1px solid var(--blueInputBorder) !important;
  color: var(--blueText) !important;
}
#modalAuth .auth-form .inp input::placeholder{
  color: rgba(255,255,255,.55) !important;
}
#modalAuth .auth-social .btn.ghost{
  background: rgba(255,255,255,.14) !important;
  border: 1px solid rgba(255,255,255,.20) !important;
  color: var(--blueText) !important;
}
#modalAuth .auth-form .link,
#modalAuth .auth-switch .link{
  color: rgba(230,245,255,.92) !important;
}

#view-dm .card,
#dmMobileOverlay .card.dm-mobile-card,
#modalUserCard .card,
#view-friends .card{
  background: linear-gradient(180deg, rgba(12, 60, 160, .36), rgba(4, 16, 48, .52)) !important;
  border: 1px solid rgba(170, 210, 255, .18) !important;
  color: var(--blueText) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

#view-dm .card header b,
#view-dm #dmWithName,
#dmMobileOverlay header b{
  color: var(--blueText) !important;
}

#view-dm input,
#view-dm textarea{
  background: rgba(2,12,35,.45) !important;
  border: 1px solid rgba(200,230,255,.16) !important;
  color: var(--blueText) !important;
}
#view-dm input::placeholder{ color: rgba(255,255,255,.55) !important; }

.ghost.x, .iconbtn, .ghost{ touch-action: manipulation; }

/* Ensure modal close/back buttons are always clickable */
.modal header .ghost.x,
.modal header .iconbtn,
#dmBackMobile{
  position: relative;
  z-index: 5;
  pointer-events: auto !important;
}

/* Notification prompt (shown after cookie consent with explicit button) */
#notifPrompt{
  position: fixed;
  inset: 0;
  display: none;
  z-index: 2147483646;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  align-items: flex-end;
  justify-content: center;
  padding: 18px;
}
#notifPrompt .np-card{
  width: min(520px, 100%);
  border-radius: 18px;
  padding: 16px 16px 14px;
  background: rgba(12,24,48,.92);
  border: 1px solid rgba(110,190,255,.18);
  box-shadow: 0 18px 60px rgba(0,0,0,.45);
  color: rgba(255,255,255,.92);
}
#notifPrompt .np-title{ font-weight: 800; font-size: 16px; margin-bottom: 6px; }
#notifPrompt .np-text{ font-size: 13px; opacity: .85; margin-bottom: 12px; }
#notifPrompt .np-actions{ display: flex; gap: 10px; justify-content: flex-end; }
#notifPrompt .np-actions button{ border-radius: 12px; padding: 10px 12px; }


/* v6 modal auth scroll fix */
#modalAuth .modal-card{max-height:92vh; overflow:auto; padding-bottom:24px;}
#modalAuth .modal-card::-webkit-scrollbar{width:10px;}
#modalAuth .modal-card .row{flex-wrap:wrap;}
#modalAuth input, #modalAuth select{min-height:44px;}
#modalAuth .btn{min-height:44px;}
/* DM left list should stay visible */
#view-dm .dm-layout{display:grid;grid-template-columns: minmax(240px, 320px) 1fr;gap:12px;}
@media (max-width: 900px){#view-dm .dm-layout{grid-template-columns:1fr;}}

/* ==============================
   UI hardening overrides (Auth + header + composer)
   Appended last to win conflicts.
   ============================== */

/* --- Auth modal: compact, no internal scroll by default --- */
#modalAuth .modal-card.auth-card{
  width: min(94vw, 520px) !important;
  max-height: 92vh !important;
  overflow: hidden !important;
  border-radius: 18px !important;
}
#modalAuth .modal-card.auth-card,
#modalAuth .modal-card.auth-card h2,
#modalAuth .modal-card.auth-card label,
#modalAuth .modal-card.auth-card .lbl,
#modalAuth .modal-card.auth-card .auth-row,
#modalAuth .modal-card.auth-card .auth-row span,
#modalAuth .modal-card.auth-card .chk span{
  color: rgba(255,255,255,.95) !important;
}
#modalAuth .modal-card.auth-card input{
  color: #07121f !important;
}
#modalAuth .auth-right{ padding: 14px !important; }
#modalAuth .auth-brand .tag{ display:none; }
@media (max-height: 740px){
  #modalAuth .auth-brand{ display:none; }
  #modalAuth .auth-row .hint{ display:none; }
  #modalAuth .auth-row{ gap: 6px; }
}

/* Round Google icon button */
.google-icon-btn{
  width: 100%;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  padding: 10px 12px;
  min-height: 46px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(0,0,0,.28);
  color: rgba(255,255,255,.92);
  backdrop-filter: blur(10px);
}
.google-icon-btn .g{
  width: 34px;
  height: 34px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius: 999px;
  background: rgba(255,255,255,.92);
}
.google-icon-btn svg{ width: 22px; height: 22px; display:block; }
.google-icon-btn .txt{ font-weight: 700; letter-spacing:.2px; }
.google-icon-btn .txt .g1{ color:#4285F4; }
.google-icon-btn .txt .g2{ color:#EA4335; }
.google-icon-btn .txt .g3{ color:#FBBC05; }
.google-icon-btn .txt .g4{ color:#4285F4; }
.google-icon-btn .txt .g5{ color:#34A853; }
.google-icon-btn .txt .g6{ color:#EA4335; }
.google-icon-btn:active{ transform: translateY(1px); }

/* --- Topbar: more compact + allow icons to fit --- */
.topbar{
  padding: 8px 10px !important;
  gap: 6px !important;
}
.topbar .right{ gap: 6px !important; }
.topbar .iconbtn{
  width: 38px;
  height: 38px;
  border-radius: 12px;
}

/* --- Pinned composers: keep input always visible (mobile) --- */
@media (max-width: 720px){
  #view-chat .composer,
  #view-dm .composer{
    position: fixed !important;
    left: 10px !important;
    right: 10px !important;
    bottom: calc(10px + env(safe-area-inset-bottom)) !important;
    z-index: 50 !important;
  }
  #view-chat .feed-rel,
  #view-dm .feed-rel{ padding-bottom: 88px !important; }
}



/* Admin-only nav (fix: avoid inline display:none bugs) */
.adm-only{ display:none !important; }
.is-admin .adm-only{ display:flex !important; }

/* Topbar compact: keep icons in one row */
#topbar .top-actions{ gap:10px; }

/* DM/chat composer pinned */
.dm-modal .composer,
.dm-modal .dm-composer,
#dmComposer{
  position: sticky;
  bottom: 0;
  z-index: 10;
}
.dm-modal .dm-head,
#dmHeader{
  position: sticky;
  top: 0;
  z-index: 11;
}

/* Auth modal fit screen (no page scroll) */
.modal-card.auth-card{
  max-height: 92vh;
  overflow: hidden;
}
.modal-card.auth-card .modal-body{
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}


/* =========================================================
   FINAL UX FIXES (readability + compact header)
   Keep at the bottom to override legacy duplicates.
   ========================================================= */

/* Auth modal: improve contrast for buttons + links */
#modalAuth .btn, #modalAuth button.btn{
  font-weight: 800 !important;
}
#modalAuth .btn.ghost{
  background: rgba(255,255,255,.12) !important;
  border: 1px solid rgba(255,255,255,.24) !important;
  color: rgba(255,255,255,.96) !important;
}
#modalAuth .btn.link{
  background: rgba(0,0,0,.20) !important;
  border: 1px solid rgba(255,255,255,.18) !important;
  color: rgba(255,255,255,.94) !important;
  padding: 10px 12px !important;
  border-radius: 12px !important;
  text-align: center !important;
}
#modalAuth .btn[disabled], #modalAuth button[disabled]{
  opacity: .75 !important;
  filter: saturate(.9) !important;
}
#modalAuth input::placeholder{
  color: rgba(255,255,255,.70) !important;
}

/* Make the top header more compact */
.topbar{ padding: 8px 10px !important; gap: 6px !important; }
.topbar .iconbtn{ width: 40px !important; height: 40px !important; }
.topbar .row{ gap: 6px !important; }

/* Remove camera buttons from header (move these to admin menu later) */
#wallCamWrap{ display:none !important; }

/* =========================
   Auth modal text: force black (requested)
   Keep existing theme/background, only change lettering.
========================= */
#modalAuth, #modalAuth *{
  color: rgba(0,0,0,.92) !important;
}
#modalAuth input{ color: rgba(0,0,0,.92) !important; }
#modalAuth input::placeholder{ color: rgba(0,0,0,.55) !important; }
#modalAuth .btn,
#modalAuth .btn.ghost,
#modalAuth .btn.link{
  color: rgba(0,0,0,.92) !important;
}

/* ===== Requested: lighter overlay + neon buttons + correct LS avatars ===== */

/* Make overlay slightly brighter so black text is readable */
.modal{
  background: rgba(135, 206, 250, .22) !important;
}

/* Neon glow for buttons (keep current colors, add glow) */
button,
.btn,
.btn2,
.btn3,
.drawer-btn,
.chip,
.pill{
  box-shadow: 0 0 10px rgba(0, 255, 255, .25), 0 0 20px rgba(0, 136, 255, .18);
  border-color: rgba(0, 255, 255, .25) !important;
}
button:hover,
.btn:hover,
.btn2:hover,
.btn3:hover,
.drawer-btn:hover,
.chip:hover,
.pill:hover{
  box-shadow: 0 0 14px rgba(0, 255, 255, .32), 0 0 28px rgba(0, 136, 255, .22);
}

/* LS/DM avatar sizing (default avatar was invisible because no sizing rules existed) */
#dmThreads .ava,
#dmHistory .ava{
  width: 44px;
  height: 44px;
  border-radius: 999px;
  object-fit: cover;
  flex: 0 0 44px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.08);
}

/* Ensure DM thread rows align nicely */
#dmThreads .thread{ align-items:center; }



/* ====== UI finish v4 overrides ====== */
/* Auth: lighter overlay + readable labels */
#modalAuth .overlay{ background: rgba(90,160,255,.28) !important; }
#modalAuth label,
#modalAuth .auth-brand .name,
#modalAuth .auth-brand .tag,
#modalAuth .auth-fields .lbl,
#modalAuth .auth-fields .hint,
#modalAuth .auth-actions,
#modalAuth .rowRemember,
#modalAuth .rowRemember span{ color: rgba(255,255,255,.94) !important; }

/* Auth: small CZ flag square (like in preloader) */
#modalAuth .auth-brand{ position: relative; padding-left: 18px; }
#modalAuth .czflag{
  width: 14px; height: 14px; border-radius: 4px;
  display: inline-block;
  box-shadow: 0 0 0 1px rgba(255,255,255,.25), 0 0 18px rgba(0,180,255,.35);
  background:
    linear-gradient(135deg, #1f4fb2 0 50%, transparent 50% 100%),
    linear-gradient(#ffffff 0 50%, #d52b1e 50% 100%);
  margin-right: 6px;
}

/* Google word colors */
#modalAuth .gword{ font-weight: 800; letter-spacing: .2px; }
#modalAuth .g1{ color:#4285F4; }
#modalAuth .g2{ color:#EA4335; }
#modalAuth .g3{ color:#FBBC05; }
#modalAuth .g4{ color:#4285F4; }
#modalAuth .g5{ color:#34A853; }
#modalAuth .g6{ color:#EA4335; }

/* DM avatars: force visible */
#dmThreads .ava img,
#dmHistory .ava img{ width:100%; height:100%; border-radius:50%; object-fit:cover; display:block; }
