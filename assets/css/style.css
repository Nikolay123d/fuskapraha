
html{ -webkit-text-size-adjust:100%; text-size-adjust:100%; }
body{margin:0;background:#0e1624;color:#fff;font-family:sans-serif}
nav{background:#111;padding:10px;display:flex;gap:10px}
button{padding:6px 10px;cursor:pointer}
.view{padding:15px}
.hidden{display:none}
.msg{background:#1d2a42;padding:8px;margin:6px 0;border-radius:6px}
.adminMsg{background:#402020}
#preloader{position:fixed;inset:0;background:#0e1624;display:flex;align-items:center;justify-content:center;z-index:9999;pointer-events:all}
#preloader.hidden{display:none}


.badge{
  display:inline-flex; align-items:center; justify-content:center;
  min-width:18px; height:18px; padding:0 5px; border-radius:999px;
  background:#e11d48; color:#fff; font-size:12px; line-height:1;
  margin-left:6px;
}
.iconBtn{display:inline-flex; gap:6px; align-items:center}
.small{font-size:12px; opacity:.8}
.card{background:#15233a;border-radius:10px;padding:12px;margin:10px 0}
.row{display:flex;gap:10px;align-items:center;justify-content:space-between}
.input{width:100%;padding:8px 10px;border-radius:8px;border:1px solid #263a5f;background:#0e1624;color:#fff}
.btn{padding:8px 10px;border-radius:8px;border:1px solid #2b426b;background:#1d2a42;color:#fff;cursor:pointer}
.btn.primary{background:#2563eb;border-color:#2563eb}
.btn.danger{background:#b91c1c;border-color:#b91c1c}
.list{display:flex;flex-direction:column;gap:8px}
hr.sep{border:none;border-top:1px solid #263a5f;margin:12px 0}


/* Auth overlay (mobile-safe, blocks clicks) */
#authOverlay{
  position:fixed; inset:0; width:100%; height:100dvh;
  display:flex; align-items:center; justify-content:center;
  background: rgba(0,0,0,.75);
  z-index: 99998;
  pointer-events: all;
}
#authOverlay.hidden{display:none}
#authCard{
  width:min(520px, calc(100vw - 24px));
  border-radius:16px;
  background:#0f1a2d;
  border:1px solid #263a5f;
  padding:16px;
}
#authCard h2{margin:0 0 10px 0}
#authRow{display:flex; gap:10px; flex-wrap:wrap}
#authRow .btn{flex:1}
#authHint{margin-top:8px}
.iconBtn{display:inline-flex; gap:8px; align-items:center}
nav .btn{min-height:36px}


/* ===== v9 Fullscreen Auth (no scroll, no click-through) ===== */
body.auth-open{ overflow:hidden; touch-action:none; }

#authOverlay{
  position:fixed; inset:0;
  width:100%;
  height:100dvh;
  z-index: 999999;
  display:block;
  pointer-events: all;
}
#authOverlay.hidden{ display:none; }
#authBg{
  position:absolute; inset:0;
  background-image: url("assets/img/auth_prague.jpg");
  background-size: cover;
  background-position: center;
  transform: scale(1.02);
}
#authScrim{
  position:absolute; inset:0;
  background: linear-gradient(180deg, rgba(0,0,0,.68), rgba(0,0,0,.82));
}
#authShell{
  position:relative;
  width:100%;
  height:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding: 14px;
  box-sizing:border-box;
}

#authTicker{
  width:min(860px, calc(100vw - 28px));
  height:34px; /* reserved => no layout jumps */
  margin-bottom:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  letter-spacing:.06em;
  text-transform:uppercase;
  color:#25ff67;
  font-size: clamp(12px, 2.8vw, 18px);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  user-select:none;
}
#authCaret{
  display:inline-block;
  width:10px;
  margin-left:6px;
  border-bottom:2px solid rgba(37,255,103,.85);
  transform: translateY(2px);
}

#authCard{
  width:min(520px, calc(100vw - 28px));
  max-height: calc(100dvh - 34px - 12px - 28px);
  border-radius: 18px;
  background: rgba(10,18,34,.88);
  border: 1px solid rgba(255,255,255,.10);
  backdrop-filter: blur(8px);
  box-shadow: 0 20px 70px rgba(0,0,0,.55);
  padding: 14px;
  display:flex;
  flex-direction:column;
  gap: 12px;
}
.authHead{ display:flex; justify-content:space-between; align-items:center; }
.authLogoRow{ display:flex; flex-direction:column; gap:2px; }
.authLogo{ font-size: 22px; font-weight:900; letter-spacing:.05em; }
.authSub{ font-size: 12px; opacity:.85; }

.authBtns{ display:flex; flex-direction:column; gap:10px; }
.authBig{ min-height:46px; font-size:16px; border-radius:14px; }

#emailForm .input{ min-height:44px; border-radius:14px; }
.gap8{ height:8px; }
.gap10{ height:10px; }
.gap12{ height:12px; }

.authFoot{ margin-top:auto; }
#authHint{ opacity:.9; }

@media (max-height: 650px){
  #authTicker{ height:28px; margin-bottom:8px; }
  .authBig{ min-height:42px; font-size:15px; }
  #authCard{ padding:12px; gap:10px; }
}



/* === v11 AUTH OVERLAY + PRELOADER HARD BLOCK === */
#preloader{
  position: fixed !important;
  inset: 0 !important;
  width: 100% !important;
  height: 100dvh !important;
  z-index: 100000 !important;
  pointer-events: all !important;
  display: flex;
  align-items: center;
  justify-content: center;
}
#preloader.hidden{
  opacity: 0;
  visibility: hidden;
  pointer-events: none !important;
  transition: opacity .2s ease, visibility .2s ease;
}

#authOverlay{
  position: fixed;
  inset: 0;
  z-index: 90000;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: all;
}
body.auth-open{
  overflow: hidden !important;
  height: 100%;
  overscroll-behavior: none;
}
#authOverlay .auth-bg{
  position:absolute;
  inset:0;
  background: url("../img/auth_prague.jpg") center/cover no-repeat;
}
#authOverlay .auth-scrim{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,.68);
}
#authOverlay .auth-card{
  position: relative;
  width: min(520px, calc(100vw - 24px));
  height: 360px;              /* fixed height: no scroll */
  overflow: hidden;           /* hard no-scroll */
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(12,18,32,.86);
  backdrop-filter: blur(10px);
  z-index: 2;
  display: flex;
  flex-direction: column;
}
#authOverlay .auth-ticker{
  height: 32px;               /* fixed height so fields never jump */
  display:flex;
  align-items:center;
  padding: 0 14px;
  border-bottom: 1px solid rgba(255,255,255,.10);
}
#authOverlay .ticker-line{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: clip;
  font-weight: 800;
  letter-spacing: .6px;
  color: #00ff88;
  font-size: 13px;
  line-height: 1;
}
#authOverlay .auth-body{
  padding: 16px 18px;
  display:flex;
  flex-direction: column;
  gap: 10px;
}
#authOverlay .auth-title{
  font-size: 26px;
  font-weight: 800;
}
#authOverlay .auth-sub{
  font-size: 13px;
  opacity: .9;
}
#authOverlay .auth-hint{
  margin-top: auto;
  font-size: 12px;
  opacity: .85;
}
#authOverlay .btn{
  height: 44px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.08);
  color: #fff;
  cursor: pointer;
}
#authOverlay .btn:active{ transform: scale(.99); }
#authOverlay .btn-primary{
  background: rgba(0,255,136,.18);
  border-color: rgba(0,255,136,.35);
}
#authOverlay .btn-google{
  background: rgba(255,255,255,.92);
  color: #0b1020;
  border-color: rgba(255,255,255,.90);
  font-weight: 700;
}
#authOverlay .btn-ghost{
  background: rgba(255,255,255,.06);
}
#authOverlay .input{
  height: 40px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(0,0,0,.22);
  color: #fff;
  padding: 0 12px;
  outline: none;
}
#authOverlay .row{
  display:flex;
  gap: 10px;
}
#authOverlay .row .btn{ flex: 1; }
#authOverlay .hidden{ display:none !important; }

/* Ticker animation without timers: pure CSS marquee (no JS intervals) */
@keyframes mkMarquee { from { transform: translateX(0); } to { transform: translateX(-50%); } }
#tickerLine{
  display:inline-block;
  will-change: transform;
  animation: mkMarquee 18s linear infinite;
}



/* === v13 overlays / no click-through === */
#preloader{
  position: fixed !important;
  inset: 0 !important;
  width: 100% !important;
  height: 100dvh !important;
  z-index: 100000 !important;
  pointer-events: all !important;
}
#preloader.hidden{ opacity:0; visibility:hidden; pointer-events:none !important; transition: opacity .2s ease, visibility .2s ease; }

#authOverlay{ position:fixed; inset:0; z-index: 90000; display:flex; align-items:center; justify-content:center; pointer-events:all; }
body.auth-open{ overflow:hidden !important; height:100%; overscroll-behavior:none; }

#authOverlay .auth-bg{ position:absolute; inset:0; background:url("../img/auth_prague.jpg") center/cover no-repeat; }
#authOverlay .auth-scrim{ position:absolute; inset:0; background:rgba(0,0,0,.68); }
#authOverlay .auth-card{ position:relative; width:min(520px, calc(100vw - 24px)); height:360px; overflow:hidden; border-radius:18px; border:1px solid rgba(255,255,255,.12); background:rgba(12,18,32,.86); backdrop-filter: blur(10px); z-index:2; display:flex; flex-direction:column; }
#authOverlay .auth-ticker{ height:32px; display:flex; align-items:center; padding:0 14px; border-bottom:1px solid rgba(255,255,255,.10); }
#authOverlay .ticker-line{ white-space:nowrap; overflow:hidden; font-weight:800; letter-spacing:.6px; color:#00ff88; font-size:13px; line-height:1; }
#authOverlay .auth-body{ padding:16px 18px; display:flex; flex-direction:column; gap:10px; height: calc(360px - 32px); }
#authOverlay .auth-title{ font-size:26px; font-weight:800; }
#authOverlay .auth-sub{ font-size:13px; opacity:.9; }
#authOverlay .auth-hint{ margin-top:auto; font-size:12px; opacity:.85; }

/* === v24 Mobile auth fit (no scroll) === */
@media (max-width: 420px), (max-height: 720px){
  #authOverlay .auth-card{ height:auto; min-height: 340px; }
  #authOverlay .auth-body{ height:auto; padding:14px 14px; gap:8px; }
  #authOverlay .auth-title{ font-size:22px; }
  #authOverlay .auth-sub{ font-size:12px; }
  #authOverlay .auth-ticker{ height:28px; }
  #authOverlay .ticker-line{ font-size:12px; }
  #authOverlay .btn{ padding: 10px 12px; font-size:14px; }
  #authOverlay .input{ height: 40px; padding: 10px 12px; font-size:14px; }
  #authOverlay .row{ gap: 8px; }
}

.btn{ height:44px; border-radius:12px; border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.08); color:#fff; cursor:pointer; }
.btn:active{ transform: scale(.99); }
.btn-primary{ background: rgba(0,255,136,.18); border-color: rgba(0,255,136,.35); }
.btn-google{ background: rgba(255,255,255,.92); color:#0b1020; border-color: rgba(255,255,255,.90); font-weight:700; }
.btn-ghost{ background: rgba(255,255,255,.06); }
.input{ height:40px; border-radius:12px; border:1px solid rgba(255,255,255,.16); background: rgba(0,0,0,.22); color:#fff; padding:0 12px; outline:none; }

.row{ display:flex; gap:10px; }

.overlay{ position:fixed; inset:0; z-index:95000; display:flex; align-items:center; justify-content:center; pointer-events:all; }
.overlay.hidden{ display:none; }
.overlay::before{ content:""; position:absolute; inset:0; background:rgba(0,0,0,.72); }
.overlay-card{ position:relative; width:min(520px, calc(100vw - 24px)); border-radius:18px; padding:16px; border:1px solid rgba(255,255,255,.12); background:rgba(12,18,32,.92); z-index:1; }
.overlay-title{ font-size:18px; font-weight:800; margin-bottom:8px; }
.overlay-text{ font-size:13px; opacity:.9; margin-bottom:12px; }
.overlay-actions{ display:flex; justify-content:flex-end; gap:12px; }

#tourOverlay .tour-dim{ position:absolute; inset:0; background:rgba(0,0,0,.6); }
#tourOverlay .tour-box{ position:relative; width:min(520px, calc(100vw - 24px)); border-radius:18px; padding:14px; border:1px solid rgba(255,255,255,.12); background:rgba(12,18,32,.92); z-index:1; }
#tourOverlay .tour-text{ font-size:14px; line-height:1.3; margin-bottom:12px; }
#tourOverlay .tour-actions{ display:flex; gap:10px; justify-content:flex-end; }
#tourOverlay .tour-arrow{ position:fixed; z-index: 96000; font-size: 28px; filter: drop-shadow(0 6px 14px rgba(0,0,0,.6)); }



/* === Neon buttons (2025) === */
.btn.btn-neon, .btn-neon {
  position: relative;
  border-radius: 14px;
  padding: 10px 14px;
  font-weight: 700;
  letter-spacing: .2px;
  border: 1px solid rgba(0,255,170,.35);
  background: rgba(0,255,170,.08);
  color: #eafff7;
  box-shadow: 0 0 0 rgba(0,255,170,0);
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
}
.btn.btn-neon:hover, .btn-neon:hover { transform: translateY(-1px); box-shadow: 0 0 18px rgba(0,255,170,.18); background: rgba(0,255,170,.12); }
.btn.btn-neon:active, .btn-neon:active { transform: translateY(0); box-shadow: 0 0 10px rgba(0,255,170,.10); }
.btn.btn-neon:focus-visible, .btn-neon:focus-visible { outline: 2px solid rgba(0,255,170,.45); outline-offset: 2px; }

/* Floating action button */
.mk-fab {
  position: fixed;
  right: 16px;
  bottom: 84px;
  width: 54px;
  height: 54px;
  border-radius: 18px;
  display: grid;
  place-items: center;
  z-index: 10020;
}

/* Admin cards helpers */
.mk-card { border-radius: 18px; padding: 14px; background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.12); }
.mk-subcard { margin-top: 10px; }
.mk-h2 { font-size: 18px; font-weight: 800; margin-bottom: 10px; }
.mk-h3 { font-size: 16px; font-weight: 800; margin-bottom: 8px; }
.mk-muted { opacity: .8; }
.mk-mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
.mk-row { display:flex; align-items:center; gap:10px; }
.mk-between { justify-content: space-between; }
.mk-col { display:flex; flex-direction:column; }
.mk-gap8 { gap:8px; }
.mk-gap10 { gap:10px; }
.mk-grid2 { display:grid; grid-template-columns: 1fr 1fr; }
.mk-input { width: 100%; padding: 10px 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,.14); background: rgba(0,0,0,.25); color: #fff; }

/* === Mobile fixed layout (header top, composer bottom) === */
@media (max-width: 760px){
  .topbar, #topbar { position: sticky; top: 0; z-index: 10010; }
  .chatComposer, #chatComposer, .dmComposer, #dmComposer {
    position: fixed;
    left: 10px; right: 10px;
    bottom: 10px;
    z-index: 10005;
  }
  .chatFeed, #chatFeed, .dmFeed, #dmFeed {
    padding-bottom: 120px;
  }
}

/* === Preloader hard block === */
#preloader {
  position: fixed !important;
  inset: 0 !important;
  z-index: 10040 !important;
  pointer-events: all !important;
}


/* === v17.1 mobile auth overlay hardening === */
.auth-overlay{
  position: fixed !important;
  inset: 0 !important;
  z-index: 10000 !important;
  pointer-events: all !important;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: max(12px, env(safe-area-inset-top)) max(12px, env(safe-area-inset-right))
           max(12px, env(safe-area-inset-bottom)) max(12px, env(safe-area-inset-left));
  overflow: hidden;
}
body.auth-open{
  overflow: hidden !important;
  overscroll-behavior: none;
  touch-action: none;
}
.auth-card{
  max-height: calc(100svh - 24px);
  width: min(520px, calc(100vw - 24px));
}
.auth-ticker{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-height: 24px;
}


/* --- Chat/DM media & icon buttons --- */
.btn-icon{width:44px; min-width:44px; padding:0; display:inline-flex; align-items:center; justify-content:center; font-size:18px; line-height:1;}
.msg-img img{max-width:100%; border-radius:14px; margin-top:8px; box-shadow: 0 10px 30px rgba(0,0,0,.35);}

/* --- Auth: tighter on small screens, no scroll --- */
@media (max-width: 420px), (max-height: 740px){
  .auth-card{width:min(560px, 96vw); padding:18px; height:auto; max-height:92dvh;}
  .auth-title{font-size:22px;}
  .auth-sub{font-size:14px;}
  .auth-actions .btn{height:46px; font-size:15px;}
  .input{height:46px;}
}



/* === FAB === */
.mk-fab{
  position: fixed;
  right: 18px;
  bottom: 18px;
  width: 64px;
  height: 64px;
  border-radius: 22px;
  border: 1px solid rgba(0,255,136,.35);
  background: rgba(0,0,0,.55);
  color: #00ff88;
  font-size: 34px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 22px rgba(0,255,136,.22);
  z-index: 5000;
}
.mk-fab-panel{
  position: fixed;
  right: 18px;
  bottom: 92px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  z-index: 5000;
}
.mk-fab-panel.hidden{ display:none; }
.mk-fab-act{
  width: 56px;
  height: 56px;
  border-radius: 18px;
  border: 1px solid rgba(0,255,136,.25);
  background: rgba(0,0,0,.55);
  color: #fff;
  font-size: 22px;
  box-shadow: 0 0 18px rgba(0,255,136,.16);
}

/* === Auth overlay mobile fit (no zoom) === */
@media (max-width: 420px){
  #authOverlay .auth-card{ width: min(96vw, 420px); }
  #authOverlay .btn{ height: 40px; border-radius: 10px; }
  #authOverlay .auth-title{ font-size: 22px; }
  #authOverlay .ticker-line{ font-size: 12px; }
}
