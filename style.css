:root{--line:rgba(255,255,255,.12);--text:#eafff3;--wall:url('./img/praha.jpg')}
*{box-sizing:border-box}html,body{font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;height:100%}
body{margin:0;background:#0b1611;color:var(--text);background-image:var(--wall);background-size:cover;background-attachment:fixed}
a{color:#7dffc1}
.topbar{position:sticky;top:0;display:flex;justify-content:space-between;align-items:center;gap:8px;padding:10px 14px;background:rgba(0,0,0,.55);backdrop-filter:blur(6px);border-bottom:1px solid var(--line);z-index:20}
.brand{font-weight:900}
.ghost{background:transparent;border:1px solid var(--line);border-radius:10px;color:var(--text);padding:6px 10px}
.citysel select{border:1px solid var(--line);background:rgba(0,0,0,.35);color:var(--text);border-radius:10px;padding:6px 8px}

.tabs{display:flex;gap:8px;padding:8px 12px;background:rgba(0,0,0,.45);border-bottom:1px solid var(--line);position:sticky;top:56px;z-index:19}
.tabs.hidden{display:none}
.tab{border:1px solid var(--line);background:rgba(0,0,0,.35);color:var(--text);border-radius:10px;padding:8px 10px}
.tab.active{border-color:#39ff91}

#views{padding:12px;max-width:1100px;margin:0 auto}
.view{display:none;background:rgba(0,0,0,.25);border:1px solid var(--line);border-radius:14px;padding:10px}
.view.active{display:block}

.feed{display:flex;flex-direction:column;gap:10px;min-height:55vh;padding-bottom:72px}
.msg{display:flex;gap:8px}
.msg .ava{width:36px;height:36px;border-radius:50%;overflow:hidden;border:1px solid var(--line);flex:0 0 36px}
.msg .ava img{width:100%;height:100%;object-fit:cover}
.msg .bubble{background:rgba(0,0,0,.55);border:1px solid var(--line);border-radius:16px;padding:8px 12px;max-width:78%}
.msg .name{font-weight:700;font-size:12px;opacity:.9;margin-bottom:4px}
.msg .text img{max-width:220px;border-radius:10px;border:1px solid var(--line);display:block;margin-top:6px}
.msg .actions{display:flex;gap:6px;margin-top:6px}
.msg .actions button{border:1px solid var(--line);background:rgba(0,0,0,.3);color:var(--text);border-radius:10px;padding:4px 8px;font-size:12px}

.composer.sticky{position:sticky;bottom:8px;display:flex;gap:8px;align-items:center;background:rgba(0,0,0,.72);padding:8px;border:1px solid var(--line);border-radius:12px}
.composer input{flex:1;min-width:160px;padding:10px;border-radius:12px;border:1px solid var(--line);background:rgba(0,0,0,.35);color:var(--text)}
.composer button,.filebtn{border:1px solid rgba(58,255,145,.8);background:rgba(0,0,0,.25);color:var(--text);border-radius:12px;padding:10px 12px}
.filebtn input{display:none}

.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:30}
.modal[hidden]{display:none !important}

/* When auth is open, disable background interactions */
body.auth-open .topbar,
body.auth-open .tabs,
body.auth-open #views{
  filter: blur(6px);
  opacity: .35;
  pointer-events: none;
  user-select: none;
}

/* Auth modal – match reference (full background, centered card) */
.modal#modalAuth{
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(4px);
}
.auth-card{ 
  width: min(92vw, 460px);
  background: rgba(255,255,255,.92);
  color: #0b1a12;
  border-radius: 26px;
  border: 1px solid rgba(0,0,0,.08);
  box-shadow: 0 30px 120px rgba(0,0,0,.45);
  overflow: hidden;
  position: relative;
}
.auth-left{display:none !important}
.auth-right{padding:26px 22px}
.auth-right h2{margin:0 0 8px 0;font-size:28px}
.auth-brand{display:flex;flex-direction:column;align-items:center;gap:10px;margin-bottom:14px;text-align:center}
.auth-brand img{width:54px;height:54px}
.auth-brand .name{font-weight:900;font-size:26px;letter-spacing:.4px}
.auth-brand .tag{font-size:14px;opacity:.75}
.auth-form .inp span{display:block;font-size:12px;opacity:.8;margin-bottom:6px}
.auth-form .inp input,.auth-form .inp select{width:100%;padding:14px 14px;border-radius:14px;border:1px solid rgba(0,0,0,.12);background:rgba(255,255,255,.75)}
.auth-form .btn.primary{border:none;border-radius:16px;padding:14px 14px;font-weight:800;background:linear-gradient(90deg,#e34aa2,#c744ff);color:#fff}
.auth-social .btn.ghost{width:100%;border-radius:16px;border:1px solid rgba(0,0,0,.14);background:rgba(255,255,255,.8);color:#0b1a12}
.auth-switch .link,.auth-form .link{color:#0b1a12;opacity:.85}
.auth-right .x{position:absolute;top:14px;right:14px;border:1px solid rgba(0,0,0,.12);background:rgba(255,255,255,.75);border-radius:12px;width:40px;height:40px}

.card{width:min(92vw,820px);background:#0f1b16;border:1px solid var(--line);border-radius:14px;padding:12px}
.card header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.row{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0}
.ava-lg{width:64px;height:64px;border-radius:50%;border:1px solid var(--line);object-fit:cover}
.cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:12px}
.map{height:420px;border-radius:12px;overflow:hidden}
.dm{display:grid;grid-template-columns:300px 1fr;gap:12px}
#dmMessages{display:flex;flex-direction:column;gap:8px;max-height:55vh;overflow:auto}
.adm-only{border:1px dashed var(--line);padding:8px;border-radius:10px;margin-top:10px}
.muted{opacity:.7;font-size:12px}

.toast{
  position:sticky; bottom:88px;
  background:rgba(0,0,0,.9);
  border:1px solid var(--line);
  padding:8px 10px; border-radius:10px; width:max-content; max-width:90%;
  margin:6px 8px; z-index:22
}
#globalToast{ position:fixed; left:50%; transform:translateX(-50%); bottom:20px }

/* Preloader */
#preloader{
  position:fixed; inset:0; z-index:99999;
  background: #071311;
  display:flex; align-items:center; justify-content:center;
  text-align:center;
}
#preloader.hidden{display:none !important;}
#preloader .box{display:flex;flex-direction:column;gap:10px;align-items:center;justify-content:center}
#preloader .spin{
  width:56px;height:56px;border-radius:50%;
  border:5px solid rgba(255,255,255,.15);
  border-top-color: rgba(58,255,145,.95);
  animation:spin 1.1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
#preloader .hint{opacity:.8;font-size:13px}
#preloader .btn{
  border:1px solid rgba(58,255,145,.9);
  background:rgba(0,0,0,.25);
  color:var(--text); border-radius:12px;
  padding:10px 14px; cursor:pointer;
}
#preloader .timer{opacity:.7;font-size:12px}

/* Greeting overlay */
#greetOverlay.modal{z-index:100000;}
#greetOverlay .card{max-width:520px;text-align:center}
#greetOverlay img.rose{width:84px;height:84px;margin:6px auto 0;display:block}

.badge{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid var(--line);font-size:12px;margin-left:6px}
.badge.premium{border-color:rgba(58,255,145,.8)}

html,body{overflow-x:hidden}


/* --- Preloader --- */
#preloader{position:fixed;inset:0;z-index:99999;display:flex;align-items:center;justify-content:center;text-align:center;color:#eafff3}
#preloader.hidden{display:none!important}
#preloader .pre-bg{position:absolute;inset:0;background-image:linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.75)),url('./img/bg.jpg');background-size:cover;background-position:center;filter:saturate(1.1)}
#preloader .box{position:relative;z-index:1;display:flex;flex-direction:column;gap:10px;align-items:center;justify-content:center;padding:22px 18px;border:1px solid var(--line);border-radius:16px;background:rgba(0,0,0,.35);backdrop-filter:blur(10px);width:min(92vw,520px)}
#preloader .logo{font-weight:900;letter-spacing:.06em}
#preloader .title{font-weight:700;font-size:20px}
#preloader .subtitle{opacity:.9}
#preloader .row{display:flex;gap:10px;align-items:center}
#preloader .spin{width:42px;height:42px;border-radius:50%;border:4px solid rgba(255,255,255,.18);border-top-color:#39ff91;animation:sp 1s linear infinite}
#preloader .timer{opacity:.85;font-size:13px}
@keyframes sp{to{transform:rotate(360deg)}}
@media (max-width:520px){
  #preloader .title{font-size:18px}
}


/* === MAKÁME CZ Theme v7 === */
body{background-image:linear-gradient(rgba(10,18,14,.65),rgba(10,18,14,.75)),var(--wall)!important}
.topbar{gap:10px;padding:12px 14px}
.brand{display:flex;align-items:center;gap:10px;min-width:140px}
.brand-logo{height:34px;width:auto;filter:drop-shadow(0 10px 18px rgba(0,0,0,.35))}
.tabs{display:flex;gap:10px;flex-wrap:wrap;padding:10px 12px}
.tab{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.14);backdrop-filter:blur(10px);text-decoration:none;color:var(--text);font-weight:600}
.tab.active{background:rgba(0,212,166,.18);border-color:rgba(0,212,166,.55)}
.view{padding:12px}
.card{background:rgba(0,0,0,.25)!important;border:1px solid rgba(255,255,255,.14)!important;border-radius:18px!important;backdrop-filter:blur(12px);box-shadow:0 20px 60px rgba(0,0,0,.35)}
#chatFeed{display:flex;flex-direction:column;gap:10px}
.msg{display:flex;gap:10px;align-items:flex-end}
.msg .ava{width:44px;height:44px;border-radius:50%;border:2px solid rgba(255,255,255,.2);overflow:hidden;flex:0 0 44px;background:rgba(255,255,255,.06)}
.msg .ava img{width:100%;height:100%;object-fit:cover}
.bubble{border-radius:22px;padding:10px 14px}
.msg.me{flex-direction:row-reverse}
.msg.me .bubble{background:rgba(0,212,166,.18);border-color:rgba(0,212,166,.45)}
.msg.other .bubble{background:rgba(0,0,0,.35)}
.msg.bot .bubble{background:rgba(255,77,109,.16);border-color:rgba(255,77,109,.35)}
.composer{position:sticky;bottom:0;margin-top:10px;padding:10px;border-radius:18px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.14);backdrop-filter:blur(12px)}
.composer input,.composer textarea{background:rgba(255,255,255,.08)!important;border:1px solid rgba(255,255,255,.14)!important;color:var(--text)!important;border-radius:14px!important}
.btn.primary{background:linear-gradient(135deg,#00D4A6,#2F6BFF)!important;border:none!important}
.btn.danger{background:linear-gradient(135deg,#FF4D6D,#FF3B30)!important;border:none!important}
#authModal .modal{background:rgba(255,255,255,.82);color:#111;border-radius:22px;max-width:420px}
#authModal .modal h2{margin:0 0 8px 0}
#authModal input{background:#eef2ff;border:1px solid #d6dcff;color:#111}
#authModal .googleBtn{background:#fff;border:1px solid #e5e7eb}
#preloader .logo-img{height:56px;width:auto;filter:drop-shadow(0 18px 32px rgba(0,0,0,.35))}
#preloader .slogan{display:block;margin-top:6px;font-weight:600;opacity:.92}
@media (max-width:520px){
  .tabs{flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch}
  .tabs::-webkit-scrollbar{display:none}
  .tab{white-space:nowrap}
}

/* === Stage7 v3 fixes (no overlays, responsive brand, colored auth & preloader) === */
.view{background:transparent !important;border:none !important;padding:0 !important}
#views{padding:10px !important}

/* Make brand fit on small screens */
.brand{min-width:0}
.brand .brand-text{font-size:18px;letter-spacing:.02em;white-space:nowrap}
@media (max-width:420px){
  .brand .brand-text{font-size:15px}
  .topbar{padding:10px 10px}
}

/* Auth modal: colored + background image, like reference */
.modal-backdrop{backdrop-filter: blur(10px)}
#modalAuth .auth-card{
  background: rgba(20,20,24,.72);
  border:1px solid rgba(255,255,255,.14);
  box-shadow: 0 20px 70px rgba(0,0,0,.45);
}
#modalAuth .auth-left{
  background: linear-gradient(120deg, rgba(0,0,0,.35), rgba(0,0,0,.15)), url('./img/praha.jpg') center/cover no-repeat;
}
#modalAuth .auth-right{
  background: rgba(255,255,255,.10);
}
#modalAuth h2, #modalAuth h3, #modalAuth p, #modalAuth label, #modalAuth a{color:#fff}
#modalAuth input{
  background: rgba(255,255,255,.18);
  border:1px solid rgba(255,255,255,.18);
  color:#fff;
}
#modalAuth input::placeholder{color:rgba(255,255,255,.65)}
#modalAuth .btn.primary{background: linear-gradient(90deg,#ff2f86,#ff9b2f); color:#111; font-weight:800}
#modalAuth .googlebtn{background: rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.18); color:#fff}

/* Preloader more colorful */
#preloader{
  background: linear-gradient(135deg, rgba(0,0,0,.70), rgba(0,0,0,.30)), url('./img/praha.jpg') center/cover no-repeat;
}
#preloader .pre-box{
  background: rgba(10,10,14,.55);
  border:1px solid rgba(255,255,255,.14);
}

/* Hide wallpaper camera by default (admin enables) */
#wallCamWrap{display:none}

/* Chat bubbles always visible, no frame */
.msg{backdrop-filter: blur(8px)}
.msg.me{background: rgba(76,255,187,.22)}
.msg.other{background: rgba(255,255,255,.14)}


/* ===== Mobile / responsive ===== */
.icon-btn{background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.12);color:#eafff3;border-radius:12px;padding:8px 10px;display:inline-flex;align-items:center;gap:6px;cursor:pointer}
.icon-btn:hover{background:rgba(0,0,0,.5)}
.icon-hamburger{margin-right:10px}
.me-avatar{width:28px;height:28px;border-radius:50%;object-fit:cover;border:1px solid rgba(255,255,255,.18)}
.badge{display:inline-flex;align-items:center;justify-content:center;min-width:16px;height:16px;padding:0 4px;border-radius:999px;background:rgba(0,255,170,.25);border:1px solid rgba(0,255,170,.45);font-size:11px;line-height:1}
.hidden{display:none !important}

/* Drawer */
.drawer-overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);backdrop-filter:blur(2px);z-index:999}
.drawer{position:fixed;top:0;left:0;height:100vh;width:min(320px,86vw);background:rgba(6,12,14,.92);border-right:1px solid rgba(255,255,255,.10);box-shadow:0 20px 60px rgba(0,0,0,.55);z-index:1000;padding:14px}
.drawer-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.drawer-title{font-weight:700;letter-spacing:.4px}
.drawer-nav{display:flex;flex-direction:column;gap:8px}
.drawer-item{width:100%;text-align:left;padding:12px 12px;border-radius:14px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.10);color:#eafff3;cursor:pointer}
.drawer-item:hover{background:rgba(255,255,255,.10)}

/* Profile modal */
.modal{position:fixed;inset:0;z-index:1100}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.55);backdrop-filter:blur(2px)}
.modal-card{position:relative;width:min(520px,92vw);margin:10vh auto 0 auto;padding:18px;border-radius:18px;background:rgba(10,16,18,.88);border:1px solid rgba(255,255,255,.14);box-shadow:0 30px 90px rgba(0,0,0,.65)}
.modal-close{position:absolute;right:12px;top:12px}
.profile-head{display:flex;gap:14px;align-items:center}
.profile-avatar{width:68px;height:68px;border-radius:16px;object-fit:cover;border:1px solid rgba(255,255,255,.18)}
.profile-nick{font-size:20px;font-weight:800}
.profile-city{opacity:.85;margin-top:2px}
.profile-actions{display:flex;gap:10px;margin-top:14px}
.profile-info{margin-top:14px;opacity:.9;font-size:14px;line-height:1.35}

/* Mobile layout overrides */
@media (max-width: 820px){
  .tabs{display:none !important}
  .topbar{gap:10px}
  .top-left{min-width:0}
  .top-right .btn, .top-right select{display:none !important}
  #btnBell, #btnMe{display:inline-flex !important}
  #btnDrawer{display:inline-flex !important}
  .wrap{padding:10px}
  .composer{flex-wrap:nowrap;gap:8px}
  .composer input, .composer textarea{width:100%}
  /* DM: make list full width */
  #view-dm .dm-wrap{grid-template-columns:1fr !important}
  #dmThreads{max-height:52vh}
  #dmFeed{min-height:32vh}
}
