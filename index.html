<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Praha Fusky</title>

  <link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body>
  <div id="wallpaper" class="chat-wallpaper"></div>
  <div class="app">
    <header class="pf-header">
      <div class="brandRow">
        <button id="profileBtn" class="profile-btn" title="–ü—Ä–æ—Ñ—ñ–ª—å" aria-label="–ü—Ä–æ—Ñ—ñ–ª—å"></button>
        <h1 class="brand">PRAHA FUSKY</h1>
        <button id="adminBtn" class="members-btn" title="–ê–¥–º—ñ–Ω" aria-label="–ê–¥–º—ñ–Ω">üë•</button>
        <button id="bellBtn" class="bell-btn" title="–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è" aria-label="–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è">üîî<span id="bellBadge" class="bell-badge">0</span></button>
      </div>
    </header>

    <div class="topBar">
      <nav class="neon-tabs" role="tablist">
        <button class="tab-button active" data-target="chatTab">üí¨ –ß–∞—Ç</button>
        <button class="tab-button" data-target="rentTab">üè† –û—Ä–µ–Ω–¥–∞</button>
        <button class="tab-button" data-target="friendsTab">üë• –î—Ä—É–∑—ñ</button>
        <button class="tab-button" data-target="dmTab">‚úâÔ∏è –û—Å–æ–±–∏—Å—Ç—ñ</button>
        <button class="tab-button" data-target="payTab">üí≥ –û–ø–ª–∞—Ç–∏</button>
        <button class="tab-button" data-target="peopleTab">üìã –£—á–∞—Å–Ω–∏–∫–∏</button>
      </nav>
      <div class="online-neon" id="onlineNeon">–û–Ω–ª–∞–π–Ω (–ø—Ä–∏–±–ª.): 0</div>
    </div>

    <main class="container">
      <section id="chatTab" class="tab-content active">
        <div class="chat-area">
          <div id="messages" class="messages"></div>
        </div>
        <input id="fileInput" type="file" accept="image/*" style="display:none"/>
        <div class="chat-input">
          <label for="fileInput" class="camera-btn" id="cameraLabel" title="–î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ">üì∑</label>
          <input id="messageInput" type="text" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..."/>
          <button id="sendButton" class="send-btn">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
        </div>
        <div id="photoToast" class="photo-toast">‚úîÔ∏è –§–æ—Ç–æ –¥–æ–¥–∞–Ω–æ. –í—ñ–¥–ø—Ä–∞–≤—Ç–µ ‚Äî –∑‚Äô—è–≤–∏—Ç—å—Å—è —É —Å—Ç—Ä—ñ—á—Ü—ñ.</div>
      </section>

      <section id="rentTab" class="tab-content">
        <div class="chat-area">
          <div id="rentMessages" class="messages"></div>
        </div>
        <input id="rentFileInput" type="file" accept="image/*" style="display:none"/>
        <div class="chat-input">
          <label for="rentFileInput" class="camera-btn" title="–î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ">üì∑</label>
          <input id="rentMessageInput" type="text" placeholder="–û–≥–æ–ª–æ—à–µ–Ω–Ω—è..."/>
          <button id="rentSendButton" class="send-btn">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
        </div>
        <div id="rentPhotoToast" class="photo-toast">‚úîÔ∏è –§–æ—Ç–æ –¥–æ–¥–∞–Ω–æ. –í—ñ–¥–ø—Ä–∞–≤—Ç–µ ‚Äî –∑‚Äô—è–≤–∏—Ç—å—Å—è —É —Å—Ç—Ä—ñ—á—Ü—ñ.</div>
      </section>

      <section id="friendsTab" class="tab-content">
        <h2 class="pill-title">–ó–∞—è–≤–∫–∏ —Ç–∞ –¥—Ä—É–∑—ñ</h2>
        <div class="friends-wrap">
          <div>
            <h3>–ó–∞—è–≤–∫–∏</h3>
            <div id="friendRequests"></div>
          </div>
          <div>
            <h3>–ú–æ—ó –¥—Ä—É–∑—ñ (<span id="friendsOnlineCount">0</span> –æ–Ω–ª–∞–π–Ω)</h3>
            <div id="friendsList"></div>
          </div>
        </div>
      </section>

      <section id="dmTab" class="tab-content">
        <h2 class="pill-title">–ú–æ—ó –¥—ñ–∞–ª–æ–≥–∏</h2>
        <div id="dmList" class="dm-grid"></div>
      </section>

      <section id="payTab" class="tab-content">
        <h2 class="pill-title">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –æ–ø–ª–∞—Ç</h2>
        <div class="pay-grid">
          <div class="pay-send">
            <h3 style="margin:0 0 8px">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è (URL —Å–∫—Ä—ñ–Ω—à–æ—Ç—É)</h3>
            <input id="payImgUrl" placeholder="https://...jpg"/>
            <button id="paySend" class="tab-button">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
            <div id="paySendMsg" class="error" style="display:none"></div>
          </div>
          <div class="pay-mine">
            <h3 style="margin:0 0 8px">–ú–æ—ó –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è</h3>
            <div id="myPays"></div>
          </div>
        </div>

        <div id="payAdminBox" class="pay-admin">
          <h3 style="margin:0 0 8px">–ê–¥–º—ñ–Ω: –≤—Ö—ñ–¥–Ω—ñ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è</h3>
          <div id="payInboxAll"></div>
        </div>
      </section>

      <section id="peopleTab" class="tab-content">
        <h2 class="pill-title">–£—á–∞—Å–Ω–∏–∫–∏ (–∞–¥–º—ñ–Ω)</h2>
        <div id="peopleGrid" class="help-grid"></div>
      </section>
    </main>
  </div>

  <!-- Modals -->
  <div id="bellModal" class="modal">
    <div class="panel">
      <button class="close" id="bellClose">‚úñ</button>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <h3 style="margin:0">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</h3>
        <button id="notifClearAll" class="tab-button danger">–û—á–∏—Å—Ç–∏—Ç–∏</button>
      </div>
      <div id="notifList"></div>
    </div>
  </div>

  <div id="profileModal" class="modal">
    <div class="panel">
      <button class="close" id="profileClose">‚úñ</button>
      <div id="profileContent"></div>
    </div>
  </div>

  <div id="authModal" class="modal">
    <div class="panel">
      <button class="close" id="modalClose">‚úñ</button>
      <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è / –í—Ö—ñ–¥</h2>
      <p style="margin:6px 0;color:#374151;font-size:13px">–ü—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –ª–∏—Å—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –º–æ–∂–µ –ø–æ—Ç—Ä–∞–ø–∏—Ç–∏ –≤ ¬´–°–ø–∞–º¬ª ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ.</p>
      <form id="registerForm" onsubmit="return false;">
        <input id="nickInput" type="text" placeholder="–ü—Å–µ–≤–¥–æ–Ω—ñ–º" required />
        <input id="emailInput" type="email" placeholder="Email" required />
        <input id="passwordInput" type="password" placeholder="–ü–∞—Ä–æ–ª—å (–º—ñ–Ω. 6)" required />
        <div class="row" style="display:flex;gap:8px;margin-top:8px">
          <button id="registerSubmit" type="button" class="tab-button">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
          <button id="loginShow"    type="button" class="tab-button alt">–£–≤—ñ–π—Ç–∏</button>
        </div>
        <div id="regError" class="error"></div>
      </form>

      <form id="loginForm" style="display:none" onsubmit="return false;">
        <input id="loginEmail" type="email" placeholder="Email" required />
        <input id="loginPassword" type="password" placeholder="–ü–∞—Ä–æ–ª—å" required />
        <div class="row" style="display:flex;gap:8px;margin-top:8px">
          <button id="loginSubmit"   type="button" class="tab-button">–£–≤—ñ–π—Ç–∏</button>
          <button id="backToRegister"type="button" class="tab-button alt">–ù–∞–∑–∞–¥</button>
        </div>
        <div id="loginError" class="error"></div>
      </form>
    </div>
  </div>

  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <!-- Config -->
  <script src="firebase/config.js"></script>

  <!-- App -->
  <script src="js/app.js"></script>
  <script src="js/admin.js"></script>
</body>
</html>
