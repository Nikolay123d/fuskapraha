<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>PR√ÅCE CZ</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand" id="openProfile">PR√ÅCE CZ</div>
    <select id="citySel" class="city"></select>
    <div class="spacer"></div>
    <button id="btnJobsOpen" class="btn small quiet">–í–∞–∫–∞–Ω—Å—ñ—ó</button>
    <button id="btnRegister" class="btn small">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
    <button id="btnLoginGoogle" class="btn small">Google</button>
    <button id="btnLoginEmail" class="btn small">Email</button>
    <button id="btnLogout" class="btn small danger" style="display:none">–í–∏–π—Ç–∏</button>
  </header>

  <!-- Home buttons (each opens its own dialog) -->
  <nav class="home-grid">
    <button class="big" id="openChat">üí¨ –ß–∞—Ç</button>
    <button class="big" id="openRent">üè† –û—Ä–µ–Ω–¥–∞</button>
    <button class="big" id="openMembers">üë• –£—á–∞—Å–Ω–∏–∫–∏</button>
    <button class="big" id="openMap">üó∫Ô∏è –ö–∞—Ä—Ç–∞</button>
    <button class="big" id="openHelp">üÜò –î–æ–ø–æ–º–æ–≥–∞</button>
    <button class="big adminOnly" id="openAdmin">üõ†Ô∏è –ê–¥–º—ñ–Ω</button>
  </nav>

  <!-- Chat dialog -->
  <dialog id="dlgChat" class="md">
    <form method="dialog" class="card">
      <header class="panel-header"><h3>–ß–∞—Ç ‚Äî <span class="muted" id="chatCity"></span></h3><div class="spacer"></div><button class="btn" value="cancel">‚úï</button></header>
      <div id="chatList" class="messages"></div>
      <div class="input-row">
        <label class="icon-btn" id="btnChatPhoto">üì∑<input type="file" id="chatPhoto" accept="image/*" hidden></label>
        <input id="chatInput" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è‚Ä¶">
        <button id="chatSend" class="btn primary" value="noop" onclick="return false;">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
      </div>
    </form>
  </dialog>

  <!-- Rent dialog -->
  <dialog id="dlgRent" class="md">
    <form method="dialog" class="card">
      <header class="panel-header"><h3>–û—Ä–µ–Ω–¥–∞ ‚Äî <span class="muted" id="rentCity"></span></h3><div class="spacer"></div><button class="btn" value="cancel">‚úï</button></header>
      <div id="rentList" class="messages"></div>
      <div class="input-row">
        <label class="icon-btn" id="btnRentPhoto">üì∑<input type="file" id="rentPhoto" accept="image/*" hidden></label>
        <input id="rentInput" placeholder="–û–≥–æ–ª–æ—à–µ–Ω–Ω—è –ø—Ä–æ –æ—Ä–µ–Ω–¥—É‚Ä¶">
        <button id="rentSend" class="btn primary" value="noop" onclick="return false;">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
      </div>
    </form>
  </dialog>

  <!-- Members dialog -->
  <dialog id="dlgMembers" class="lg">
    <form method="dialog" class="card">
      <header class="panel-header"><h3>–£—á–∞—Å–Ω–∏–∫–∏</h3><div class="spacer"></div><button class="btn" value="cancel">‚úï</button></header>
      <div class="panel-header">
        <input id="mSearch" class="inline" placeholder="–ü–æ—à—É–∫ –Ω—ñ–∫—É‚Ä¶">
        <select id="mFilterLocale" class="inline"><option value="">–ú–æ–≤–∞: –≤—Å—ñ</option><option value="cs">ƒåesky</option><option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option></select>
        <select id="mFilterPlan" class="inline"><option value="">–ü–ª–∞–Ω: –≤—Å—ñ</option><option>VIP</option><option>Premium</option><option>Premium+</option><option>Free</option></select>
        <div class="spacer"></div>
        <button id="seedBtn" class="btn small adminOnly" value="noop" onclick="return false;">+120 –ø—Ä–æ—Ñ—ñ–ª—ñ–≤</button>
      </div>
      <div id="membersList" class="grid"></div>
    </form>
  </dialog>

  <!-- Map dialog -->
  <dialog id="dlgMap" class="lg">
    <form method="dialog" class="card">
      <header class="panel-header"><h3>–ö–∞—Ä—Ç–∞ ‚Äî <span class="muted" id="mapCity"></span></h3><div class="spacer"></div><button class="btn" value="cancel">‚úï</button></header>
      <div id="map" class="map"></div>
      <div class="mapbar adminOnly">
        <input id="poiTitle" placeholder="–ù–∞–∑–≤–∞ —Ç–æ—á–∫–∏">
        <input id="poiLink" placeholder="–ü–æ—Å–∏–ª–∞–Ω–Ω—è">
        <label class="icon-btn" id="btnPoiPhoto">üì∑<input type="file" id="poiPhoto" accept="image/*" hidden></label>
        <button id="poiAdd" class="btn small" value="noop" onclick="return false;">–î–æ–¥–∞—Ç–∏</button>
      </div>
    </form>
  </dialog>

  <!-- Help dialog -->
  <dialog id="dlgHelp" class="lg">
    <form method="dialog" class="card">
      <header class="panel-header"><h3>–î–æ–ø–æ–º–æ–≥–∞</h3><div class="spacer"></div><button class="btn" value="cancel">‚úï</button></header>
      <div id="helpList" class="cards"></div>
      <footer class="panel-header adminOnly">
        <button id="helpAddBtn" class="btn small" value="noop" onclick="return false;">+ –ö–∞—Ä—Ç–∫–∞</button>
      </footer>
    </form>
  </dialog>

  <!-- Admin dialog -->
  <dialog id="dlgAdmin" class="lg">
    <form method="dialog" class="card">
      <header class="panel-header"><h3>–ê–¥–º—ñ–Ω</h3><div class="spacer"></div><button class="btn" value="cancel">‚úï</button></header>
      <div class="grid two">
        <div class="card">
          <h4>–û–±–æ—ó</h4>
          <input id="wallGlobal" placeholder="URL –¥–ª—è –≤—Å—ñ—Ö">
          <button id="saveWallGlobal" class="btn small" value="noop" onclick="return false;">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
          <div class="mt8"></div>
          <input id="wallCity" placeholder="URL –¥–ª—è –º—ñ—Å—Ç–∞">
          <button id="saveWallCity" class="btn small" value="noop" onclick="return false;">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
          <div class="mt8"></div>
          <label class="icon-btn" id="btnWallFile">üì∑<input type="file" id="wallFile" accept="image/*" hidden></label>
        </div>
        <div class="card">
          <h4>–ö–ª—é—á –∫–∞—Ä—Ç–∏</h4>
          <input id="mapsKey" placeholder="(—Å–µ–∫—Ä–µ—Ç) settings/googleMapsKey">
          <button id="saveMapsKey" class="btn small" value="noop" onclick="return false;">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        </div>
        <div class="card">
          <h4>–ë–æ—Ç–∏</h4>
          <input id="botNick" placeholder="–ù—ñ–∫ –±–æ—Ç–∞">
          <select id="botLocale"><option value="cs">ƒåesky</option><option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option></select>
          <button id="createBot" class="btn small" value="noop" onclick="return false;">–°—Ç–≤–æ—Ä–∏—Ç–∏ –±–æ—Ç–∞</button>
        </div>
        <div class="card">
          <h4>–ú–∞—Å–æ–≤—ñ –¥—ñ—ó</h4>
          <button id="actionPremiumSelected" class="btn small" value="noop" onclick="return false;">Premium –æ–±—Ä–∞–Ω–∏–º</button>
          <button id="actionBanSelected" class="btn small danger" value="noop" onclick="return false;">–ë–∞–Ω –æ–±—Ä–∞–Ω–∏–º</button>
        </div>
      </div>
    </form>
  </dialog>

  <!-- Jobs dialog (unchanged) -->
  <dialog id="jobsDlg">
    <form method="dialog" id="jobForm" class="card">
      <header class="panel-header"><h3>–í–∞–∫–∞–Ω—Å—ñ—ó ‚Äî <span id="jobsCity"></span></h3><div class="spacer"></div>
        <button id="jobAddBtn" class="btn small adminOnly" value="noop" onclick="return false;">+ –î–æ–¥–∞—Ç–∏</button>
        <button id="jobAddBtn2" class="btn small employerOnly" style="display:none" value="noop" onclick="return false;">+ –î–æ–¥–∞—Ç–∏</button>
        <button class="btn" value="cancel">‚úï</button>
      </header>
      <div id="jobsList" class="cards"></div>
    </form>
  </dialog>

  <!-- New job dialog -->
  <dialog id="jobNewDlg">
    <form method="dialog" id="jobNewForm" class="card" style="max-width:520px">
      <h3>–ù–æ–≤–∞ –≤–∞–∫–∞–Ω—Å—ñ—è</h3>
      <input id="jobTitle" placeholder="–ü–æ—Å–∞–¥–∞" required>
      <input id="jobSalary" placeholder="–û–ø–ª–∞—Ç–∞ (CZK/–º—ñ—Ç, –¥–æ–≥–æ–≤—ñ—Ä...)">
      <input id="jobContact" placeholder="–ö–æ–Ω—Ç–∞–∫—Ç (—Ç–µ–ª–µ–≥—Ä–∞–º/—Ç–µ–ª/email)">
      <textarea id="jobDesc" placeholder="–û–ø–∏—Å‚Ä¶"></textarea>
      <label class="icon-btn" id="btnJobPhoto">üì∑<input type="file" id="jobPhoto" accept="image/*" hidden></label>
      <menu>
        <button class="btn" value="cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        <button class="btn primary" value="ok">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
      </menu>
    </form>
  </dialog>

  <!-- Profile + DM -->
  <dialog id="profileDlg">
    <form method="dialog" class="card" id="profileForm">
      <div class="prof-header">
        <img id="profAvatar" class="avatar-lg" src="" alt="">
        <div><h3 id="profNick">–ü—Ä–æ—Ñ—ñ–ª—å</h3><div id="profMeta" class="muted"></div></div>
      </div>
      <div class="panel-header">
        <button class="btn" id="btnProfAdd" value="noop" onclick="return false;">–î–æ–¥–∞—Ç–∏ –≤ –¥—Ä—É–∑—ñ</button>
        <div class="spacer"></div>
        <button class="btn" value="cancel">‚úï</button>
      </div>
      <section>
        <div id="profAboutText" class="muted">‚Äî</div>
      </section>
      <hr/>
      <h4>–õ–°</h4>
      <div id="dmThread" class="messages"></div>
      <div class="input-row">
        <label class="icon-btn" id="btnDmPhoto">üìé<input type="file" id="dmPhoto" accept="image/*" hidden></label>
        <input id="dmInput" placeholder="–í–∞—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è‚Ä¶">
        <button id="dmSend" class="btn primary" value="noop" onclick="return false;">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
      </div>
    </form>
  </dialog>

  <!-- Register -->
  <dialog id="regDlg">
    <form method="dialog" id="regForm" class="card" style="max-width:520px">
      <h3>–®–≤–∏–¥–∫–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h3>
      <p class="muted">–õ–∏—Å—Ç —ñ–∑ –∞–∫—Ç–∏–≤–∞—Ü—ñ—î—é –º–æ–∂–µ –ø–æ—Ç—Ä–∞–ø–∏—Ç–∏ —É <b style="color:#ff6b6b">–°–ü–ê–ú</b>.</p>
      <div class="grid two">
        <select id="regRole" required><option value="seeker">–®—É–∫–∞—é —Ä–æ–±–æ—Ç—É</option><option value="employer">–†–æ–±–æ—Ç–æ–¥–∞–≤–µ—Ü—å</option></select>
        <select id="regLocale" required><option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option><option value="cs">ƒåe≈°tina</option></select>
      </div>
      <input id="regNick" placeholder="–ù—ñ–∫" required>
      <input id="regEmail" type="email" placeholder="Email" required>
      <input id="regPass" type="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
      <p class="muted">–ë–µ–∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–æ—à—Ç–∏ ‚Äî –∫–æ—Ä–∏—Å—Ç—É–≤–∞–Ω–Ω—è <b>6 –≥–æ–¥–∏–Ω</b>, –ø–æ—Ç—ñ–º –±—É–¥–µ –∑–∞–ø–∏—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ email.</p>
      <menu><button class="btn" value="cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button><button class="btn primary" value="ok">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button></menu>
    </form>
  </dialog>

  <!-- Verify -->
  <dialog id="verifyDlg">
    <form method="dialog" class="card" style="max-width:520px">
      <h3>–ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å email</h3>
      <p>–ú–∏ –Ω–∞–¥—ñ—Å–ª–∞–ª–∏ –ª–∏—Å—Ç. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ <b style="color:#ff6b6b">–°–ü–ê–ú</b>.</p>
      <menu><button class="btn" id="btnResend">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ —â–µ —Ä–∞–∑</button><button class="btn primary" value="ok">–ì–æ—Ç–æ–≤–æ</button></menu>
    </form>
  </dialog>

  <audio id="sndSend" src="assets/send.wav" preload="auto"></audio>
  <audio id="sndPing" src="assets/ping.wav" preload="auto"></audio>
  <div id="toast"></div>

  <script src="config.js"></script>
  <script src="app.js"></script>
  <script src="bots.js"></script>
</body>
</html>
