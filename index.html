<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>PR√ÅCE CZ CHAT</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>

  <!-- Firebase compat (CDN, works on GitHub Pages) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>

  <link rel="stylesheet" href="style.css"/>
</head>
<body>
<header class="topbar">
  <div class="brand">PR√ÅCE CZ CHAT</div>
  <div class="controls">
    <label class="cityLabel">–ú—ñ—Å—Ç–æ:</label>
    <select id="citySelect" class="city"></select>
    <button id="participantsBtn" class="ghost">üë•</button>
    <button id="notifBtn" class="ghost">üîî <span id="notifCount">0</span></button>
    <button id="profileBtn" class="primary">–ü—Ä–æ—Ñ—ñ–ª—å</button>
    <button id="btnGoogle" class="secondary">–£–≤—ñ–π—Ç–∏ Google</button>
    <button id="btnEmail" class="secondary">–£–≤—ñ–π—Ç–∏ Email</button>
  </div>
</header>

<nav class="tabs">
  <button data-tab="chat" class="tab active">üí¨ –ß–∞—Ç</button>
  <button data-tab="rent" class="tab">üèòÔ∏è –û—Ä–µ–Ω–¥–∞</button>
  <button data-tab="map"  class="tab">üó∫Ô∏è –ö–∞—Ä—Ç–∞</button>
  <button data-tab="friends" class="tab">üë• –î—Ä—É–∑—ñ</button>
  <button data-tab="dm" class="tab">üì® –û—Å–æ–±–∏—Å—Ç—ñ</button>
  <button data-tab="help" class="tab">üÜò –î–æ–ø–æ–º–æ–≥–∞</button>
  <button data-tab="admin" class="tab adminOnly">üõ†Ô∏è –ê–¥–º—ñ–Ω–∫–∞</button>
</nav>

<main>
  <!-- CHAT -->
  <section id="tab-chat" class="tabPage show">
    <div id="chatList" class="messages"></div>
    <div class="composer">
      <label class="attach" title="–§–æ—Ç–æ"><input type="file" id="chatPhoto" accept="image/*"></label>
      <input id="chatInput" placeholder="–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è‚Ä¶">
      <button id="chatSend" class="primary">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
    </div>
  </section>

  <!-- RENT -->
  <section id="tab-rent" class="tabPage">
    <div id="rentList" class="messages"></div>
    <div class="composer">
      <label class="attach" title="–§–æ—Ç–æ"><input type="file" id="rentPhoto" accept="image/*"></label>
      <input id="rentInput" placeholder="–û–≥–æ–ª–æ—à–µ–Ω–Ω—è‚Ä¶">
      <button id="rentSend" class="primary">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
    </div>
  </section>

  <!-- MAP -->
  <section id="tab-map" class="tabPage">
    <div class="mapToolbar">
      <select id="poiFilter">
        <option value="all">–£—Å–µ</option>
        <option value="help">–í–æ–ª–æ–Ω—Ç–µ—Ä–∏</option>
        <option value="pharmacy">–ê–ø—Ç–µ–∫–∏</option>
        <option value="shop">–ú–∞–≥–∞–∑–∏–Ω–∏</option>
      </select>
      <button id="addPoiBtn" class="adminOnly">+ –¢–æ—á–∫—É</button>
      <button id="runMapBot" class="adminOnly">ü§ñ –î–æ–ø–æ–≤–Ω–∏—Ç–∏</button>
    </div>
    <div id="map" class="map"></div>
  </section>

  <!-- FRIENDS -->
  <section id="tab-friends" class="tabPage">
    <div id="friendRequests"></div>
    <h3>–ú–æ—ó –¥—Ä—É–∑—ñ</h3>
    <div id="friendsList" class="list"></div>
    <h3>–£—á–∞—Å–Ω–∏–∫–∏</h3>
    <div id="usersList" class="list"></div>
  </section>

  <!-- DIRECT MESSAGES -->
  <section id="tab-dm" class="tabPage">
    <aside id="dmSidebar" class="sidebar"></aside>
    <div class="dmPane">
      <div id="dmHeader" class="dmHeader">–û—Å–æ–±–∏—Å—Ç–∏–π –¥—ñ–∞–ª–æ–≥</div>
      <div id="dmList" class="messages"></div>
      <div class="composer">
        <label class="attach" title="–§–æ—Ç–æ"><input type="file" id="dmPhoto" accept="image/*"></label>
        <input id="dmInput" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è‚Ä¶">
        <button id="dmSend" class="primary">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
      </div>
    </div>
  </section>

  <!-- HELP FEED -->
  <section id="tab-help" class="tabPage">
    <div class="helpToolbar">
      <button id="addHelpBtn" class="adminOnly">+ –î–æ–¥–∞—Ç–∏ –∫–∞—Ä—Ç–∫—É</button>
      <button id="runHelpBot" class="adminOnly">ü§ñ –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞</button>
    </div>
    <div id="helpList" class="cards"></div>
  </section>

  <!-- ADMIN -->
  <section id="tab-admin" class="tabPage">
    <h3>–û–±–æ—ó</h3>
    <div class="grid2">
      <div>
        <label>URL –¥–ª—è –≤—Å—ñ—Ö:</label>
        <input id="bgGlobalUrl" placeholder="https://...">
        <button id="saveBgGlobal" class="secondary">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
      </div>
      <div>
        <label>URL –¥–ª—è –º—ñ—Å—Ç–∞:</label>
        <input id="bgCityUrl" placeholder="https://...">
        <button id="saveBgCity" class="secondary">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
      </div>
    </div>

    <h3>–£—á–∞—Å–Ω–∏–∫–∏</h3>
    <div id="adminUsers" class="list"></div>
  </section>
</main>

<!-- LOGIN / REGISTER MODAL -->
<div id="authModal" class="modal hidden">
  <div class="modalContent">
    <button class="close" data-close>‚úñ</button>
    <h3>–í—Ö—ñ–¥ / –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h3>
    <div class="tabs small">
      <button data-auth-tab="login" class="tab active">–í—Ö—ñ–¥</button>
      <button data-auth-tab="register" class="tab">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
    </div>
    <div id="authLogin" class="authPane show">
      <input id="loginEmail" placeholder="Email">
      <input id="loginPass" placeholder="–ü–∞—Ä–æ–ª—å" type="password">
      <button id="doLogin" class="primary">–£–≤—ñ–π—Ç–∏</button>
      <button id="doGoogle" class="secondary">Google</button>
      <button id="doReset" class="ghost">–ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?</button>
    </div>
    <div id="authRegister" class="authPane">
      <input id="regNick" placeholder="–ù—ñ–∫">
      <input id="regEmail" placeholder="Email">
      <input id="regPass" placeholder="–ü–∞—Ä–æ–ª—å" type="password">
      <select id="regLang">
        <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
        <option value="cs">ƒåe≈°tina</option>
      </select>
      <button id="doRegister" class="primary">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
    </div>
  </div>
</div>

<!-- PROFILE MODAL -->
<div id="profileModal" class="modal hidden">
  <div class="modalContent">
    <button class="close" data-close>‚úñ</button>
    <h3>–ü—Ä–æ—Ñ—ñ–ª—å</h3>
    <div id="profileCard"></div>
    <div class="grid2">
      <div>
        <label>–ú–æ–≤–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É</label>
        <select id="profileLang">
          <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
          <option value="cs">ƒåe≈°tina</option>
        </select>
      </div>
      <div>
        <label>–ê–≤–∞—Ç–∞—Ä URL</label>
        <input id="profileAvatar" placeholder="https://...">
      </div>
    </div>
    <button id="saveProfile" class="primary">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
    <button id="logoutBtn" class="ghost">–í–∏–π—Ç–∏</button>
  </div>
</div>

<!-- Toast -->
<div id="toast" class="toast hidden">‚úîÔ∏è</div>

<script src="config.js"></script>
<script src="admin.js"></script>
<script src="bots.js"></script>
<script src="app.js"></script>
</body>
</html>
