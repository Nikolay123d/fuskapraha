<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Pr√°ce CZ ‚Äî Chat</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://www.gstatic.com">
  <link rel="preconnect" href="https://firebase.googleapis.com">
</head>
<body>
  <div id="app">
    <!-- Top bar with tabs -->
    <header class="topbar" id="topbar">
      <button id="btnToggleTabs" title="–°—Ö–æ–≤–∞—Ç–∏/–ø–æ–∫–∞–∑–∞—Ç–∏ –≤–∫–ª–∞–¥–∫–∏">‚ñ§</button>
      <nav class="tabs" id="tabs">
        <button data-tab="chat" class="tab active">–ß–∞—Ç</button>
        <button data-tab="rent" class="tab">–û—Ä–µ–Ω–¥–∞</button>
        <button data-tab="dms" class="tab">–û—Å–æ–±–∏—Å—Ç—ñ</button>
        <button data-tab="friends" class="tab">–î—Ä—É–∑—ñ</button>
        <button data-tab="participants" class="tab">–£—á–∞—Å–Ω–∏–∫–∏</button>
        <button data-tab="help" class="tab">–î–æ–ø–æ–º–æ–≥–∞</button>
        <button data-tab="map" class="tab">–ö–∞—Ä—Ç–∞</button>
        <button data-tab="admin" class="tab adminOnly">–ê–¥–º—ñ–Ω–∫–∞</button>
      </nav>

      <div class="right-actions">
        <div class="notif" id="notifBell" title="–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è"><span id="notifCount">0</span>üîî</div>
        <button id="btnLogin" class="auth">–£–≤—ñ–π—Ç–∏</button>
        <button id="btnLogout" class="auth hidden">–í–∏–π—Ç–∏</button>
      </div>
    </header>

    <div class="layout">
      <!-- Sidebar: user profile (left, sticky) -->
      <aside class="sidebar" id="sidebar">
        <div class="profile-card" id="profileCard">
          <div class="avatar-wrap">
            <img id="profileAvatar" class="avatar" src="assets/img/avatar.png" alt="avatar">
            <button id="btnChangeAvatar" class="camera" title="–ó–º—ñ–Ω–∏—Ç–∏ —Ñ–æ—Ç–æ">üì∑</button>
            <input type="file" id="avatarFile" accept="image/*" capture="environment" class="hidden">
          </div>
          <div class="profile-fields">
            <input id="profileNick" placeholder="–ù—ñ–∫">
            <input id="profileEmail" placeholder="Email">
            <select id="profileLang" title="–ú–æ–≤–∞">
              <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
              <option value="cs">ƒåe≈°tina</option>
            </select>
            <button id="btnSaveProfile" class="primary">–ó–±–µ—Ä–µ–≥—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</button>
          </div>
          <div class="profile-meta">
            <div>UID: <span id="profileUid" class="muted">‚Äî</span></div>
            <div>–ú—ñ—Å—Ç–æ:
              <select id="citySelect"></select>
            </div>
          </div>
        </div>

        <div class="friend-requests" id="friendRequestsBox">
          <h3>–ó–∞–ø–∏—Ç–∏ –≤ –¥—Ä—É–∑—ñ</h3>
          <div id="friendRequestsList" class="list"></div>
        </div>
      </aside>

      <!-- Main content -->
      <main class="content">
        <!-- CHAT -->
        <section id="tab-chat" class="tabview active">
          <div class="wallpaper-hint">–§–æ–Ω –¥–ª—è –º—ñ—Å—Ç–∞ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –≤ –ê–¥–º—ñ–Ω—Ü—ñ ‚Üí –û–±–æ—ó</div>
          <div id="chatList" class="messages"></div>
          <div id="chatLoader" class="loader">‚Ä¶</div>
          <div class="composerBar">
            <label class="attach">
              üì∑
              <input id="chatPhoto" type="file" accept="image/*" capture="environment">
            </label>
            <input id="chatInput" class="composer" placeholder="–ù–∞–ø–∏—Å–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è‚Ä¶">
            <button id="chatSend" class="send">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
          </div>
        </section>

        <!-- RENT -->
        <section id="tab-rent" class="tabview">
          <div id="rentList" class="messages"></div>
          <div id="rentLoader" class="loader">‚Ä¶</div>
          <div class="composerBar">
            <label class="attach">
              üì∑
              <input id="rentPhoto" type="file" accept="image/*" capture="environment">
            </label>
            <input id="rentInput" class="composer" placeholder="–û–≥–æ–ª–æ—à–µ–Ω–Ω—è –æ—Ä–µ–Ω–¥–∏‚Ä¶">
            <button id="rentSend" class="send">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
          </div>
        </section>

        <!-- DMS -->
        <section id="tab-dms" class="tabview">
          <div class="split">
            <div class="dm-list" id="dmList"></div>
            <div class="dm-dialog">
              <div id="dmTitle" class="dm-title">–í–∏–±–µ—Ä—ñ—Ç—å —Å–ø—ñ–≤—Ä–æ–∑–º–æ–≤–Ω–∏–∫–∞</div>
              <div id="dmThread" class="messages"></div>
              <div id="dmLoader" class="loader">‚Ä¶</div>
              <div class="composerBar">
                <label class="attach">
                  üìé
                  <input id="dmPhoto" type="file" accept="image/*" capture="environment">
                </label>
                <input id="dmInput" class="composer" placeholder="–í–∞—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è‚Ä¶">
                <button id="dmSend" class="send">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
              </div>
            </div>
          </div>
        </section>

        <!-- FRIENDS -->
        <section id="tab-friends" class="tabview">
          <div id="friendsList" class="cards"></div>
        </section>

        <!-- PARTICIPANTS -->
        <section id="tab-participants" class="tabview">
          <div id="participantsList" class="cards"></div>
        </section>

        <!-- HELP -->
        <section id="tab-help" class="tabview">
          <div id="helpList" class="cards"></div>
          <div class="adminOnly">
            <h3>–î–æ–¥–∞—Ç–∏ –∫–∞—Ä—Ç–∫—É</h3>
            <input id="helpTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
            <input id="helpUrl" placeholder="–ü–æ—Å–∏–ª–∞–Ω–Ω—è (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)">
            <label class="attach small">üì∑ <input id="helpPhoto" type="file" accept="image/*"></label>
            <button id="helpAdd" class="primary">–î–æ–¥–∞—Ç–∏</button>
          </div>
        </section>

        <!-- MAP -->
        <section id="tab-map" class="tabview">
          <div id="map" class="map">Map</div>
          <div class="adminOnly map-controls">
            <button id="mapAdd" class="primary">+ –¢–æ—á–∫—É</button>
          </div>
          <ul id="mapPoiList" class="list"></ul>
        </section>

        <!-- ADMIN -->
        <section id="tab-admin" class="tabview">
          <div class="admin-grid">
            <div class="card">
              <h3>–û–±–æ—ó</h3>
              <label>URL –¥–ª—è –≤—Å—ñ—Ö <input id="wpGlobal" placeholder="https://‚Ä¶"></label>
              <div class="row">
                <label>URL –¥–ª—è –º—ñ—Å—Ç–∞ <input id="wpCity" placeholder="https://‚Ä¶"></label>
                <select id="wpCityName"></select>
              </div>
              <button id="saveWallpapers" class="primary">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
            </div>
            <div class="card">
              <h3>–¢–µ—Å—Ç–∏</h3>
              <button id="seedChat" class="secondary">ü§ñ –î–æ–¥–∞—Ç–∏ —Ç–µ—Å—Ç-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</button>
              <button id="seedRent" class="secondary">ü§ñ –î–æ–¥–∞—Ç–∏ —Ç–µ—Å—Ç-–æ—Ä–µ–Ω–¥—É</button>
              <button id="seedPOI" class="secondary">ü§ñ –î–æ–¥–∞—Ç–∏ —Ç–æ—á–∫—É –Ω–∞ –∫–∞—Ä—Ç—ñ</button>
            </div>
          </div>
          <p class="muted small">–Ø–∫—â–æ —â–æ—Å—å –Ω–µ –ø—Ä–∞—Ü—é—î ‚Äî –≤—ñ–¥–∫—Ä–∏–π—Ç–µ <a href="diag.html" target="_blank">diag.html</a> (—Å–∞–º–æ–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞).</p>
        </section>
      </main>
    </div>

    <!-- Toasts -->
    <div id="toast" class="toast"></div>

    <!-- Login/Register Modal -->
    <dialog id="authDialog" class="modal">
      <h3>–í—Ö—ñ–¥ / –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h3>
      <input id="authNick" placeholder="–ù—ñ–∫ (–¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó)">
      <input id="authEmail" placeholder="Email">
      <input id="authPass" placeholder="–ü–∞—Ä–æ–ª—å" type="password">
      <div class="row">
        <button id="btnEmailLogin" class="primary">–£–≤—ñ–π—Ç–∏</button>
        <button id="btnEmailRegister" class="secondary">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
      </div>
      <button id="btnGoogleLogin" class="google">üîê –£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</button>
      <button id="btnCloseAuth" class="link">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </dialog>
  </div>

  <!-- Firebase compat (–Ω–∞–¥i–π–Ω–æ –¥–ª—è GitHub Pages) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>

  <!-- Leaflet for map (fallback, no API key needed) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script src="config.js"></script>
  <script src="app.js"></script>
</body>
</html>
