
<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Makame.cz chat</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="./style.css">
  <style>/* ensure no wallpaper flicker */
    body{background:#0b1611 var(--wall) center/cover fixed no-repeat}
  </style>
</head>
<body>
  <div id="loader">NaÄÃ­tÃ¡nÃ­â€¦</div>

  <header class="topbar">
    <div class="left">
      <button id="toggleTabs" class="ghost">â˜° Menu</button>
      <div class="brand">Makame.cz chat</div>
      <label class="citysel"><span>MÄ›sto:</span>
        <select id="citySelect">
          <option value="praha">Praha</option>
          <option value="brno">Brno</option>
          <option value="ostrava">Ostrava</option>
          <option value="plzen">PlzeÅˆ</option>
          <option value="olomouc">Olomouc</option>
        </select>
      </label>
    </div>
    <div class="mid"><span id="onlineCounter">Online (pÅ™ibl.): 0</span></div>
    <div class="right">
      <button id="participantsBtn" title="ÃšÄastnÃ­ci">ğŸ‘¥</button>
      <button id="profileBtn" title="Profil">Profil</button>
    </div>
  </header>

  <nav class="tabs" id="tabs">
    <button class="tab active" data-tab="chat">ğŸ’¬ Chat</button>
    <button class="tab" data-tab="rent">ğŸ  PronÃ¡jem</button>
    <button class="tab" data-tab="map">ğŸ—ºï¸ Mapa</button>
    <button class="tab" data-tab="dm">âœ‰ï¸ OsobnÃ­</button>
    <button class="tab" data-tab="friends">ğŸ‘¥ PÅ™Ã¡telÃ©</button>
    <button class="tab adm-only" data-tab="admin">ğŸ›  Admin</button>
  </nav>

  <main id="views">
    <!-- CHAT -->
    <section id="view-chat" class="view active">
      <div id="chatFeed" class="feed"></div>
      <div id="chatToast" class="toast" hidden>âœ”ï¸ Foto pÅ™idÃ¡no. <span class="closex" data-close>âœ–</span></div>
      <div class="composer sticky">
        <label class="filebtn" title="Foto"><input type="file" id="chatFile" accept="image/*">ğŸ“·</label>
        <input id="chatInput" placeholder="NapiÅ¡te zprÃ¡vuâ€¦ (mÅ¯Å¾e bÃ½t i URL na foto)">
        <button id="chatSend">Odeslat</button>
        <button id="clearChat" class="adm-only" style="display:none">ğŸ§¹ VyÄistit</button>
      </div>
    </section>

    <!-- RENT -->
    <section id="view-rent" class="view">
      <div id="rentFeed" class="feed"></div>
      <div class="composer sticky">
        <label class="filebtn"><input type="file" id="rentFile" accept="image/*">ğŸ“·</label>
        <input id="rentInput" placeholder="InzerÃ¡tâ€¦">
        <button id="rentSend">Odeslat</button>
      </div>
    </section>

    <!-- MAP -->
    <section id="view-map" class="view">
      <div class="row">
        <button id="mapCenter">Centrovat</button>
        <label class="filebtn adm-only" title="PozadÃ­ mÄ›sta (foto)"><input type="file" id="cityBgFile" accept="image/*">ğŸ“·</label>
        <input id="cityBgUrl" class="adm-only" placeholder="URL pozadÃ­ pro mÄ›sto">
        <button id="saveCityBg" class="adm-only">UloÅ¾it pozadÃ­</button>
      </div>
      <div id="map" class="map"></div>
      <div class="adm-only row">
        <input id="poiTitle" placeholder="NÃ¡zev">
        <input id="poiType" placeholder="Typ (vol/help/pharm)">
        <input id="poiAvatar" placeholder="URL avataru (vol.)">
        <input id="poiPhoto" placeholder="URL foto (vol.)">
        <input id="poiLat" placeholder="lat (vol.)">
        <input id="poiLng" placeholder="lng (vol.)">
        <button id="poiAdd">PÅ™idat bod</button>
      </div>
    </section>

    <!-- DM -->
    <section id="view-dm" class="view">
      <div class="dm">
        <aside id="dmSidebar"></aside>
        <div class="dmThread">
          <div id="dmHeader"></div>
          <div id="dmMessages"></div>
          <div id="dmToast" class="toast" hidden>âœ”ï¸ Foto pÅ™idÃ¡no do zprÃ¡vy. <span class="closex" data-close>âœ–</span></div>
          <div class="composer sticky">
            <label class="filebtn"><input type="file" id="dmFile" accept="image/*">ğŸ“·</label>
            <input id="dmInput" placeholder="ZprÃ¡vaâ€¦">
            <button id="dmSend">Odeslat</button>
          </div>
        </div>
      </div>
    </section>

    <!-- FRIENDS -->
    <section id="view-friends" class="view">
      <div class="row">
        <input id="friendEmail" placeholder="Email uÅ¾ivatele">
        <button id="friendAddBtn">PÅ™idat do pÅ™Ã¡tel</button>
      </div>
      <div id="friendsList" class="list"></div>
    </section>

    <!-- ADMIN -->
    <section id="view-admin" class="view">
      <div class="card adm-only">
        <h3>Role / Moderace</h3>
        <div class="row">
          <input id="roleUid" placeholder="UID uÅ¾ivatele">
          <button id="makeMod">+ ModerÃ¡tor</button>
          <button id="removeMod">â€“ ModerÃ¡tor</button>
          <input id="banReason" placeholder="DÅ¯vod">
          <button id="ban30">â›” Ban 30 min</button>
          <button id="unban">âœ… Unban</button>
        </div>
        <h4>NahlÃ¡Å¡enÃ­</h4>
        <div id="reportsBox"></div>
      </div>

      <div class="card adm-only">
        <h3>Boti</h3>
        <div class="row">
          <input id="botCity" placeholder="MÄ›sto (praha)">
          <input id="botText" placeholder="Text">
          <input id="botImage" placeholder="URL obrÃ¡zku (vol.)">
          <select id="botInterval">
            <option value="2">kaÅ¾dÃ© 2 min</option>
            <option value="5">kaÅ¾dÃ½ch 5 min</option>
            <option value="15" selected>kaÅ¾dÃ½ch 15 min</option>
          </select>
          <button id="botStart">Start</button>
          <button id="botStop">Stop</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Participants -->
  <div id="participantsModal" class="modal" hidden>
    <div class="card">
      <header><b>ÃšÄastnÃ­ci</b><button data-close>âœ–</button></header>
      <div id="participantsList"></div>
    </div>
  </div>

  <!-- Profile -->
  <div id="profileModal" class="modal" hidden>
    <div class="card">
      <header><b>MÅ¯j profil</b><button data-close>âœ–</button></header>
      <div class="row">
        <label class="filebtn"><input type="file" id="avatarFile" accept="image/*">ğŸ“·</label>
        <img id="myAvatar" class="ava-lg" src="./img/default-avatar.svg" alt="">
        <div>
          <div><b id="myName">UÅ¾ivatel</b></div>
          <div class="muted">Role: <span id="myRole">seeker</span> Â· PlÃ¡n: <span id="myPlan">free</span></div>
        </div>
      </div>
      <div class="row">
        <input id="setNick" placeholder="NovÃ½ nick">
        <input id="setAvatarUrl" placeholder="URL avataru (vol.)">
        <select id="setRole">
          <option value="seeker">HledÃ¡m prÃ¡ci</option>
          <option value="employer">ZamÄ›stnavatel</option>
        </select>
        <button id="saveProfile">UloÅ¾it</button>
      </div>
      <div class="row">
        <button id="buyPremium">Koupit Premium</button>
        <button id="resetPass">Obnovit heslo</button>
        <button id="btnSignout">OdhlÃ¡sit</button>
      </div>
    </div>
  </div>

  <!-- Cookie bar -->
  <div id="cookieBar" hidden>
    PouÅ¾Ã­vÃ¡me cookies pro zlepÅ¡enÃ­ sluÅ¾eb. <button id="cookieOk">SouhlasÃ­m</button>
  </div>

  <!-- Audio permission -->
  <div id="audioAsk" hidden>
    <div class="card">
      <header><b>Povolit zvuky?</b></header>
      <p>Chcete slyÅ¡et zvuky novÃ½ch zprÃ¡v a upozornÄ›nÃ­?</p>
      <div class="row"><button id="audioAllow">Povolit</button><button id="audioDeny">ZakÃ¡zat</button></div>
    </div>
  </div>

  <!-- Greeting for Dasha only -->
  <div id="greetDasha" hidden>
    <div class="wrap">
      <img src="./img/rose.svg" alt="rose">
      <div class="big">Jsi nejkrÃ¡snÄ›jÅ¡Ã­ dÃ­vka ğŸŒ¹</div>
      <div>Od tvÅ¯rce projektu â€” mÅ¯Å¾eÅ¡ mi napsat do zprÃ¡v nebo mÄ› pÅ™idat do pÅ™Ã¡tel.</div>
      <div class="row" style="justify-content:center;margin-top:12px">
        <button id="greetDm">Napsat</button>
        <button id="greetAdd">PÅ™idat do pÅ™Ã¡tel</button>
        <button id="greetClose">ZavÅ™Ã­t</button>
      </div>
    </div>
  </div>

  <div id="globalToast" class="toast" hidden></div>

  <!-- libs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-storage-compat.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- app -->
  <script src="./config.js"></script>
  <script src="./helpers.js"></script>
  <script src="./friends.js"></script>
  <script src="./admin.js"></script>
  <script src="./auth.js"></script>
  <script src="./app.js"></script>
  <script src="./sw-register.js"></script>
</body>
</html>
