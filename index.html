<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Praha Fu≈°ky ‚Äî —Å–æ—Ü—á–∞—Ç</title>

  <!-- –®—Ä–∏—Ñ—Ç–∏ -->
  <link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"/>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- –°—Ç–∏–ª—ñ -->
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body><!-- Firebase compat (–±–µ–∑ ESM, —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏ —Å —Ç–≤–æ–∏–º–∏ js/*.js) -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
  // !!! –í–ê–ñ–ù–û: databaseURL –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∏–Ω—Å—Ç–∞–Ω—Å–æ–º, –≥–¥–µ —É —Ç–µ–±—è –ø—Ä–∞–≤–∏–ª–∞ !!!
  const firebaseConfig = {
    apiKey: "AIzaSyDw_bVibsVyZegH7OJyZ_yRjI3uLhroVBk",
    authDomain: "praga-4baee.firebaseapp.com",
    databaseURL: "https://praga-4baee-default-rtdb.firebaseio.com",
    projectId: "praga-4baee",
    storageBucket: "praga-4baee.firebasestorage.app",
    messagingSenderId: "336023952536",
    appId: "1:336023952536:web:f7437feaa25b6eadcd04ed",
    measurementId: "G-BGDJD6R12N"
  };

  firebase.initializeApp(firebaseConfig);

  // –î–µ–ª–∞–µ–º –≥–ª–æ–±–∞–ª–∏, —á—Ç–æ–±—ã js/app.js, js/admin.js, js/bots.js –∏—Ö –≤–∏–¥–µ–ª–∏
  window.auth = firebase.auth();
  window.db   = firebase.database();

  // (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ø—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
  db.ref('.info/connected').on('value', s => {
    console.log('RTDB connected:', !!s.val());
  });
</script>
  <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±–æ–∏ (–ø—Ä—è–º–æ–π URL) -->
  <div class="chat-wallpaper" aria-hidden="true"></div>

  <!-- –•–µ–¥–µ—Ä -->
  <header class="pf-header">
    <div class="brandRow">
      <button id="profileBtn" class="profile-btn" title="–ü—Ä–æ—Ñ—ñ–ª—å" aria-label="–ü—Ä–æ—Ñ—ñ–ª—å"></button>
      <h1>PRAHA FU≈†KY</h1>
      <button id="membersBtn" class="members-btn" title="–£—á–∞—Å–Ω–∏–∫–∏" aria-label="–£—á–∞—Å–Ω–∏–∫–∏">üë•</button>
      <button id="bellBtn" class="bell-btn" title="–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è" aria-label="–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è">üîî<span id="bellBadge" class="bell-badge">0</span></button>
    </div>
  </header>

  <!-- –í–∫–ª–∞–¥–∫–∏ -->
  <div class="topBar">
    <div class="neon-wrap">
      <nav class="neon-tabs" role="tablist" aria-label="–í–∫–ª–∞–¥–∫–∏">
        <button class="tab-button active" data-target="chatTab">üí¨ –ß–∞—Ç</button>
        <button class="tab-button" data-target="rentTab">üè† –û—Ä–µ–Ω–¥–∞</button>
        <button class="tab-button" data-target="mapTab">üó∫Ô∏è –ö–∞—Ä—Ç–∞</button>
        <button class="tab-button" data-target="friendsTab">üë• –î—Ä—É–∑—ñ</button>
        <button class="tab-button dm" data-target="dmTab">‚úâÔ∏è –û—Å–æ–±–∏—Å—Ç—ñ</button>
        <button class="tab-button" data-target="helpTab">üÜò –î–æ–ø–æ–º–æ–≥–∞</button>
      </nav>
      <div class="online-neon" id="onlineNeon">–û–Ω–ª–∞–π–Ω (–ø—Ä–∏–±–ª.): 0</div>
    </div>
  </div>

  <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
  <main class="container" role="main">
    <!-- –ß–∞—Ç -->
    <section id="chatTab" class="tab-content active" role="region" aria-label="–ß–∞—Ç">
      <div class="chat-area" id="chatArea" aria-live="polite">
        <div id="messages" class="messages" role="log"></div>
      </div>
      <input id="fileInput" type="file" accept="image/*" style="display:none" />
      <div class="chat-input" role="region" aria-label="–í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è">
        <label for="fileInput" class="camera-btn" id="cameraLabel" aria-hidden="true" title="–î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ">üì∑</label>
        <input id="messageInput" type="text" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..." aria-label="–¢–µ–∫—Å—Ç" />
        <button id="sendButton" class="send-btn">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
      </div>
      <div id="photoToast" class="photo-toast">‚úîÔ∏è –§–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—è —É—Å–ø—ñ—à–Ω–æ –¥–æ–¥–∞–Ω–∞. –í—ñ–¥–ø—Ä–∞–≤—Ç–µ –°–ú–° ‚Äî —Ñ–æ—Ç–æ –∑‚Äô—è–≤–∏—Ç—å—Å—è –ø—ñ—Å–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏.</div>
    </section>

    <!-- –û—Ä–µ–Ω–¥–∞ -->
    <section id="rentTab" class="tab-content" role="region" aria-label="–û—Ä–µ–Ω–¥–∞">
      <div class="chat-area" id="rentArea">
        <div id="rentMessages" class="messages" role="log"></div>
      </div>
      <input id="rentFileInput" type="file" accept="image/*" style="display:none" />
      <div class="chat-input" role="region" aria-label="–í—ñ–¥–ø—Ä–∞–≤–∫–∞ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è">
        <label for="rentFileInput" class="camera-btn" title="–î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ">üì∑</label>
        <input id="rentMessageInput" type="text" placeholder="–û–≥–æ–ª–æ—à–µ–Ω–Ω—è..." />
        <button id="rentSendButton" class="send-btn">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
      </div>
      <div id="rentPhotoToast" class="photo-toast">‚úîÔ∏è –§–æ—Ç–æ –¥–æ–¥–∞–Ω–æ. –í—ñ–¥–ø—Ä–∞–≤—Ç–µ ‚Äî –∑‚Äô—è–≤–∏—Ç—å—Å—è —É —Å—Ç—Ä—ñ—á—Ü—ñ.</div>
    </section>

    <!-- –ö–∞—Ä—Ç–∞ -->
    <section id="mapTab" class="tab-content" role="region" aria-label="–ö–∞—Ä—Ç–∞">
      <div class="map-tools">
        <input id="mapSearch" placeholder="–ü–æ—à—É–∫ (–≤–æ–ª–æ–Ω—Ç–µ—Ä–∏, –∞–ø—Ç–µ–∫–∞‚Ä¶)" />
        <button class="tab-button" data-f="all">–£—Å–µ</button>
        <button class="tab-button" data-f="volunteer">–í–æ–ª–æ–Ω—Ç–µ—Ä–∏</button>
        <button class="tab-button" data-f="aid">–î–æ–ø–æ–º–æ–≥–∞</button>
        <button class="tab-button" data-f="pharmacy">–ê–ø—Ç–µ–∫–∏</button>
        <button id="centerBtn" class="tab-button">–¶–µ–Ω—Ç—Ä—É–≤–∞—Ç–∏</button>
      </div>
      <div id="map"></div>
    </section>

    <!-- –î—Ä—É–∑—ñ -->
    <section id="friendsTab" class="tab-content" role="region" aria-label="–î—Ä—É–∑—ñ">
      <h2 class="pill-title">–ó–∞—è–≤–∫–∏ —Ç–∞ –¥—Ä—É–∑—ñ</h2>
      <div class="friends-wrap">
        <div>
          <h3>–ó–∞—è–≤–∫–∏</h3>
          <div id="friendRequests"></div>
        </div>
        <div>
          <h3>–ú–æ—ó –¥—Ä—É–∑—ñ (<span id="friendsOnlineCount">0</span> –æ–Ω–ª–∞–π–Ω)</h3>
          <div id="friendsList"></div>
        </div>
      </div>
    </section>

    <!-- –õ–° -->
    <section id="dmTab" class="tab-content" role="region" aria-label="–û—Å–æ–±–∏—Å—Ç—ñ">
      <h2 class="pill-title">–ú–æ—ó –¥—ñ–∞–ª–æ–≥–∏</h2>
      <div id="dmList" class="dm-grid"></div>
    </section>

    <!-- –î–æ–ø–æ–º–æ–≥–∞ -->
    <section id="helpTab" class="tab-content" role="region" aria-label="–î–æ–ø–æ–º–æ–≥–∞">
      <h2 class="pill-title">–¢–µ—Ä–º—ñ–Ω–æ–≤–∞ –¥–æ–ø–æ–º–æ–≥–∞ —É –ü—Ä–∞–∑—ñ</h2>
      <div id="helpGrid" class="help-grid"></div>
    </section>
  </main>

  <!-- –ú–æ–¥–∞–ª–∫–∏ -->
  <div id="bellModal" class="modal">
    <div class="panel">
      <button class="close" id="bellClose">‚úñ</button>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <h3 style="margin:0">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</h3>
        <button id="notifClearAll" class="tab-button danger">–û—á–∏—Å—Ç–∏—Ç–∏</button>
      </div>
      <div id="notifList"></div>
    </div>
  </div>

  <div id="profileModal" class="modal">
    <div class="panel">
      <button class="close" id="profileClose">‚úñ</button>
      <div id="profileContent"></div>
    </div>
  </div>

  <div id="authModal" class="modal">
    <div class="panel">
      <button class="close" id="modalClose">‚úñ</button>
      <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è / –í—Ö—ñ–¥</h2>
      <form id="registerForm" onsubmit="return false;">
        <input id="nickInput" type="text" placeholder="–ü—Å–µ–≤–¥–æ–Ω—ñ–º" required />
        <input id="emailInput" type="email" placeholder="Email" required />
        <input id="passwordInput" type="password" placeholder="–ü–∞—Ä–æ–ª—å (–º—ñ–Ω. 6)" required />
        <div class="row">
          <button id="registerSubmit" type="button" class="tab-button">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
          <button id="loginShow"    type="button" class="tab-button alt">–£–≤—ñ–π—Ç–∏</button>
        </div>
        <div id="regError" class="error"></div>
      </form>

      <form id="loginForm" style="display:none" onsubmit="return false;">
        <input id="loginEmail" type="email" placeholder="Email" required />
        <input id="loginPassword" type="password" placeholder="–ü–∞—Ä–æ–ª—å" required />
        <div class="row">
          <button id="loginSubmit"   type="button" class="tab-button">–£–≤—ñ–π—Ç–∏</button>
          <button id="backToRegister"type="button" class="tab-button alt">–ù–∞–∑–∞–¥</button>
        </div>
        <div id="loginError" class="error"></div>
      </form>
    </div>
  </div>

  <div id="soundModal" class="modal">
    <div class="panel">
      <button class="close" id="soundClose">‚úñ</button>
      <h3 style="margin-top:0">–£–≤—ñ–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫ —Å–ø–æ–≤—ñ—â–µ–Ω—å?</h3>
      <p>–ö–æ—Ä–æ—Ç–∫—ñ –∑–≤—É–∫–∏ –ø—Ä–∏ –Ω–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö —Ç–∞ –õ–°.</p>
      <div style="display:flex;gap:8px">
        <button id="soundEnable" class="tab-button">üîä –£–≤—ñ–º–∫–Ω—É—Ç–∏</button>
        <button id="soundLater" class="tab-button alt">–ü—ñ–∑–Ω—ñ—à–µ</button>
      </div>
    </div>
  </div>

  <!-- –ê–¥–º—ñ–Ω: —Ç–∞–±–ª–∏—Ü—è —É—á–∞—Å–Ω–∏–∫—ñ–≤ -->
  <div id="adminUsersModal" class="modal">
    <div class="panel" role="dialog" aria-modal="true">
      <button class="close" id="adminUsersClose">‚úñ</button>
      <div class="user-badge" style="margin-bottom:8px">–°–ø–∏—Å–æ–∫ —É—á–∞—Å–Ω–∏–∫—ñ–≤</div>
      <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
        <input id="userSearch" placeholder="–ü–æ—à—É–∫ –∑–∞ –Ω—ñ–∫–æ–º –∞–±–æ email‚Ä¶" style="flex:1;padding:10px;border:1px solid #e5e7eb;border-radius:10px" />
        <span class="user-badge">–£—Å—å–æ–≥–æ: <b id="usersTotal">0</b></span>
        <span class="user-badge">–ù–∞ –µ–∫—Ä–∞–Ω—ñ: <b id="usersShown">0</b></span>
      </div>
      <div style="flex:1;overflow:auto;border:1px solid #e5e7eb;border-radius:10px;background:#fff">
        <table style="width:100%;border-collapse:collapse">
          <thead>
            <tr>
              <th style="text-align:left;padding:10px">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</th>
              <th style="text-align:left;padding:10px">Email</th>
              <th style="text-align:left;padding:10px">–°—Ç–∞—Ç—É—Å</th>
              <th style="text-align:left;padding:10px">–ü—Ä–µ–º—ñ—É–º</th>
              <th style="text-align:left;padding:10px">–î—ñ—ó</th>
            </tr>
          </thead>
          <tbody id="usersTBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <!-- –¢–≤–æ–∏ –∫–ª—é—á–∏ -->
  <script src="firebase/config.js"></script>

  <!-- –õ–æ–≥—ñ–∫–∞ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞) -->
  <script src="js/app.js"></script>
  <script src="js/admin.js"></script>
  <script src="js/bots.js"></script>
</body>
</html>
