<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PR√ÅCE CZ CHAT ‚Äî v2.0 (fixed)</title>
  <link rel="stylesheet" href="./style.css">
  <link rel="preload" as="image" href="./bg.jpg">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
</head>
<body>
  <header class="topbar">
    <button id="toggleTabs" class="pill">‚ò∞ –ú–µ–Ω—é</button>
    <div class="brand">PR√ÅCE CZ CHAT</div>
    <div class="citysel">
      <span>–ú—ñ—Å—Ç–æ:</span>
      <select id="citySelect">
        <option value="praha">Praha</option>
        <option value="brno">Brno</option>
        <option value="ostrava">Ostrava</option>
      </select>
    </div>
    <div class="actions">
      <button id="participantsBtn" class="pill">üë•</button>
      <button id="notifBtn" class="pill">üîî <span id="notifCount">0</span></button>
      <button id="profileBtn" class="pill">–ü—Ä–æ—Ñ—ñ–ª—å</button>
    </div>
  </header>

  <nav id="tabs">
    <button class="tab active" data-tab="chat">üí¨ –ß–∞—Ç</button>
    <button class="tab" data-tab="board">üè† –û–≥–æ–ª–æ—à–µ–Ω–Ω—è</button>
    <button class="tab" data-tab="map">üó∫Ô∏è –ö–∞—Ä—Ç–∞</button>
    <button class="tab" data-tab="dm">‚úâÔ∏è –û—Å–æ–±–∏—Å—Ç—ñ</button>
    <button class="tab" data-tab="help">üÜò –î–æ–ø–æ–º–æ–≥–∞</button>
    <button class="tab" data-tab="admin">üõ†Ô∏è –ê–¥–º—ñ–Ω</button>
  </nav>

  <main id="views">
    <!-- CHAT -->
    <section id="view-chat" class="view active">
      <div id="chatFeed" class="feed"></div>
      <div class="composer sticky">
        <label class="filebtn" title="–§–æ—Ç–æ –∑ –≥–∞–ª–µ—Ä–µ—ó/–∫–∞–º–µ—Ä–∏">
          <input type="file" id="chatFile" accept="image/*">
          üì∑
        </label>
        <input id="chatInput" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è‚Ä¶">
        <button id="chatSend">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
      </div>
    </section>

    <!-- BOARD -->
    <section id="view-board" class="view">
      <div id="boardFeed" class="feed"></div>
      <form id="boardForm" class="panel">
        <input id="adTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
        <input id="adLink" placeholder="–ü–æ—Å–∏–ª–∞–Ω–Ω—è">
        <textarea id="adText" placeholder="–¢–µ–∫—Å—Ç"></textarea>
        <input id="adImg" placeholder="URL –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è">
        <button id="adPublish" type="submit">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
      </form>
    </section>

    <!-- MAP -->
    <section id="view-map" class="view">
      <div id="map" class="map"></div>
      <div class="panel">
        <button id="addPlace" class="adm-only" style="display:none">–î–æ–¥–∞—Ç–∏ —Ç–æ—á–∫—É</button>
      </div>
    </section>

    <!-- DM -->
    <section id="view-dm" class="view two">
      <aside class="sidebar">
        <div class="title">–î—ñ–∞–ª–æ–≥–∏</div>
        <div id="dmSidebar" class="feed"></div>
      </aside>
      <section class="content">
        <div id="dmHeader" class="title">–û–±—Ä–∞—Ç–∏ —Å–ø—ñ–≤—Ä–æ–∑–º–æ–≤–Ω–∏–∫–∞</div>
        <div id="dmMessages" class="feed"></div>
        <div class="composer sticky">
          <input id="dmInput" placeholder="–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...">
          <button id="dmSend">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
        </div>
      </section>
    </section>

    <!-- HELP -->
    <section id="view-help" class="view">
      <div class="panel">
        <h3>–®–≤–∏–¥–∫—ñ –∫–æ–Ω—Ç–∞–∫—Ç–∏</h3>
        <ul>
          <li>112 ‚Äî –ï–∫—Å—Ç—Ä–µ–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞</li>
          <li>155 ‚Äî –®–≤–∏–¥–∫–∞</li>
          <li>158 ‚Äî –ü–æ–ª—ñ—Ü—ñ—è</li>
        </ul>
      </div>
    </section>

    <!-- ADMIN -->
    <section id="view-admin" class="view">
      <div class="panel">
        <h3>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</h3>
        <input id="adminSearch" placeholder="–ü–æ—à—É–∫ –Ω—ñ–∫—É/uid/email">
        <div id="adminUsers" class="feed"></div>
      </div>
      <div class="panel">
        <h3>–ó–∞—è–≤–∫–∏ –Ω–∞ Premium</h3>
        <div id="payInbox" class="feed"></div>
      </div>
      <div class="panel">
        <h3>–û–ø–ª–∞—Ç–∞: –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–Ω–∫—É</h3>
        <div class="grid2">
          <label>Holder <input id="bankHolder"></label>
          <label>Account (domestic) <input id="bankAccount"></label>
          <label>IBAN <input id="bankIBAN"></label>
          <label>VS <input id="bankVS"></label>
          <label>MSG <input id="bankMsg"></label>
        </div>
        <div class="row">
          <button id="saveBank">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
          <button id="previewQR">–ü–æ–∫–∞–∑–∞—Ç–∏ QR</button>
        </div>
        <div id="qrPreview"></div>
      </div>
    </section>
  </main>

  <!-- Profile modal -->
  <dialog id="profileModal">
    <form method="dialog" class="panel">
      <h3>–ü—Ä–æ—Ñ—ñ–ª—å</h3>
      <label>–ù—ñ–∫: <input id="profName"></label>
      <label>URL –∞–≤–∞—Ç–∞—Ä–∫–∏: <input id="profAvatar"></label>
      <label>–†–æ–ª—å:
        <select id="profRole">
          <option value="seeker">–®—É–∫–∞—é —Ä–æ–±–æ—Ç—É</option>
          <option value="employer">–†–æ–±–æ—Ç–æ–¥–∞–≤–µ—Ü—å</option>
        </select>
      </label>
      <div class="row">
        <button id="saveProfile" value="save">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        <button id="buyPremium" class="buyBtn" data-plan="200" value="close">–ö—É–ø–∏—Ç–∏ Premium</button>
        <button id="resetPwd" value="close">–°–∫–∏–Ω—É—Ç–∏ –ø–∞—Ä–æ–ª—å</button>
        <button id="logout" value="close">–í–∏–π—Ç–∏</button>
      </div>
      <button id="profileClose">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </form>
  </dialog>

  <!-- Participants modal -->
  <dialog id="participantsModal">
    <div class="panel">
      <h3>–£—á–∞—Å–Ω–∏–∫–∏</h3>
      <div id="participantsList" class="feed"></div>
      <button id="participantsClose">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
  </dialog>

  <!-- Cookie bar -->
  <div id="cookieBar" class="cookie" hidden>
    –ú–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ cookie –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ —Å–∞–π—Ç—É.
    <button id="cookieOk">OK</button>
  </div>

  <!-- Toasts -->
  <div id="globalToast" class="toast" hidden></div>

  <!-- Audio placeholders -->
  <audio id="aNewChat"></audio>
  <audio id="aNewDM"></audio>
  <audio id="aOk"></audio>
  <audio id="aErr"></audio>

  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-database-compat.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>

  <script src="./config.js"></script>
  <script src="./style.js"></script>
  <script src="./app.js"></script>
  <script src="./dm.js"></script>
  <script src="./admin.js"></script>
  <script src="./bots.js"></script>
  <script src="./payments.js"></script>
  <script>if ('serviceWorker' in navigator) { navigator.serviceWorker.register('./sw.js').catch(()=>{}); }</script>
</body>
</html>
