<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PR√ÅCE CZ ‚Äî Chat + –û–±–æ—ó</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Firebase compat CDN (–Ω–∞ GitHub Pages —ç—Ç–æ —Å–∞–º—ã–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">PR√ÅCE CZ</div>
    <div class="city-select">
      <label>–ú—ñ—Å—Ç–æ</label>
      <select id="citySel">
        <option>Praha</option>
        <option>Brno</option>
        <option>Ostrava</option>
        <option>Plze≈à</option>
      </select>
    </div>
    <div class="actions">
      <button id="btnLogin" class="btn ghost">–£–≤—ñ–π—Ç–∏</button>
      <button id="btnLogout" class="btn danger" style="display:none">–í–∏–π—Ç–∏</button>
      <span id="userBadge" class="badge" style="display:none"></span>
    </div>
  </header>

  <nav class="tabs">
    <button class="tab active" data-view="chat">–ß–∞—Ç</button>
    <button class="tab" data-view="rent">–û—Ä–µ–Ω–¥–∞</button>
    <button class="tab" data-view="admin" id="adminTab" style="display:none">–ê–¥–º—ñ–Ω</button>
  </nav>

  <main id="view-chat" class="view active">
    <ul id="chatList" class="feed"></ul>
    <div class="composerBar">
      <input type="file" id="chatPhoto" accept="image/*" style="display:none" />
      <button id="chatPhotoBtn" class="icon">üì∑</button>
      <input id="chatInput" class="input" placeholder="–ù–∞–ø–∏—Å–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è‚Ä¶" />
      <button id="chatSend" class="btn primary">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
    </div>
  </main>

  <main id="view-rent" class="view">
    <ul id="rentList" class="feed"></ul>
    <div class="composerBar">
      <input type="file" id="rentPhoto" accept="image/*" style="display:none" />
      <button id="rentPhotoBtn" class="icon">üì∑</button>
      <input id="rentInput" class="input" placeholder="–û–ø–∏—Å –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è‚Ä¶" />
      <button id="rentSend" class="btn primary">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
    </div>
  </main>

  <main id="view-admin" class="view">
    <section class="card">
      <h3>–û–±–æ—ó —Å–∞–π—Ç—É</h3>
      <p class="muted">–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –≤—ñ–¥ –Ω–∞–π–≤–∏—â–æ–≥–æ –¥–æ –Ω–∏–∂—á–æ–≥–æ: <code>byCityContext ‚Üí byContext ‚Üí byCity ‚Üí global ‚Üí assets/img/bg.jpg</code>.</p>
      <div class="grid2">
        <div>
          <h4>–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ URL</h4>
          <label>–¢–∏–ø –ø–µ—Ä–µ–≥–ª—è–¥—É (view)</label>
          <select id="wpViewSel">
            <option value="">(–±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É)</option>
            <option value="chat">chat</option>
            <option value="rent">rent</option>
          </select>
          <label>–ú—ñ—Å—Ç–æ</label>
          <select id="wpCitySel">
            <option value="">(–Ω–µ –∑–∞–¥–∞–Ω–æ)</option>
            <option>Praha</option>
            <option>Brno</option>
            <option>Ostrava</option>
            <option>Plze≈à</option>
          </select>
          <label>URL –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</label>
          <input id="wpUrl" class="input" placeholder="https://...jpg" />
          <div class="row">
            <button id="btnSaveGlobal" class="btn">–ó–±–µ—Ä–µ–≥—Ç–∏ —è–∫ global</button>
            <button id="btnSaveCity" class="btn">–ó–±–µ—Ä–µ–≥—Ç–∏ –≤ byCity</button>
            <button id="btnSaveContext" class="btn">–ó–±–µ—Ä–µ–≥—Ç–∏ –≤ byContext</button>
            <button id="btnSaveCityContext" class="btn">–ó–±–µ—Ä–µ–≥—Ç–∏ –≤ byCityContext</button>
          </div>
        </div>
        <div>
          <h4>–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª —É Storage</h4>
          <input type="file" id="wpFile" accept="image/*" />
          <button id="btnUploadWP" class="btn">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ ‚Üí –æ—Ç—Ä–∏–º–∞—Ç–∏ URL</button>
          <p id="wpUploadStatus" class="muted"></p>
        </div>
      </div>

      <hr />
      <h4>–ü–æ—Ç–æ—á–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è</h4>
      <pre id="wpDump" class="dump">loading‚Ä¶</pre>
    </section>

    <section class="card">
      <h3>–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h3>
      <div class="row">
        <button id="btnDiagDB" class="btn ghost">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –ë–î</button>
        <button id="btnDiagAuth" class="btn ghost">Google Sign‚ÄëIn (popup‚Üíredirect)</button>
      </div>
      <div id="diagOut" class="muted"></div>
    </section>
  </main>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó -->
  <dialog id="authDialog">
    <form method="dialog" class="authBox">
      <h3>–í—Ö—ñ–¥</h3>
      <input id="email" class="input" type="email" placeholder="Email" />
      <input id="pass" class="input" type="password" placeholder="–ü–∞—Ä–æ–ª—å" />
      <div class="row">
        <button id="doLogin" class="btn primary" type="button">–£–≤—ñ–π—Ç–∏</button>
        <button id="doSignup" class="btn" type="button">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
        <button id="doGoogle" class="btn ghost" type="button">Google</button>
      </div>
      <p id="authErr" class="bad"></p>
      <div class="row end">
        <button class="btn ghost">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </form>
  </dialog>

  <div id="toast" class="toast" style="display:none"></div>

  <script src="config.js"></script>
  <script src="app.js"></script>
</body>
</html>
